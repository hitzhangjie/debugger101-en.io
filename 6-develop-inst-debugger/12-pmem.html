
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>6.12 Printing Memory Data · GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-md-toc/style.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="13-pregs.html" />
    
    
    <link rel="prev" href="11-continue.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    1 Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../2-preface/">
            
                <a href="../2-preface/">
            
                    
                    2 Preface
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../3-terms/">
            
                <a href="../3-terms/">
            
                    
                    3 Common Terms
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../4-basics/">
            
                <a href="../4-basics/">
            
                    
                    4 Software Debugging Basics
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../4-basics/1-purposes.html">
            
                <a href="../4-basics/1-purposes.html">
            
                    
                    4.1 Debugging Purposes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../4-basics/2-dependencies.html">
            
                <a href="../4-basics/2-dependencies.html">
            
                    
                    4.2 Debugging Dependencies
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../4-basics/3-countertactics.html">
            
                <a href="../4-basics/3-countertactics.html">
            
                    
                    4.3 Anti-Debugging Techniques
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../5-debugger-skeleton/">
            
                <a href="../5-debugger-skeleton/">
            
                    
                    5 Entering Debugger Development
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../5-debugger-skeleton/1-debugger_skeleton.html">
            
                <a href="../5-debugger-skeleton/1-debugger_skeleton.html">
            
                    
                    5.1 Debugger Overview
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../5-debugger-skeleton/2-debugger_demo.html">
            
                <a href="../5-debugger-skeleton/2-debugger_demo.html">
            
                    
                    5.2 Debugger Example
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="./">
            
                <a href="./">
            
                    
                    6 Developing Go Instruction-Level Debugger
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="1-process_start.html">
            
                <a href="1-process_start.html">
            
                    
                    6.1 Process Launch
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="2-process_attach.html">
            
                <a href="2-process_attach.html">
            
                    
                    6.2 Process Attach
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="3-process_start_attach.html">
            
                <a href="3-process_start_attach.html">
            
                    
                    6.3 Launch & Attach
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="4-debug-session.html">
            
                <a href="4-debug-session.html">
            
                    
                    6.4 Debug Session
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5" data-path="5-disassemble.html">
            
                <a href="5-disassemble.html">
            
                    
                    6.5 Disassembly
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.6" data-path="6-breakpoint.html">
            
                <a href="6-breakpoint.html">
            
                    
                    6.6 Adding Breakpoints
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.7" data-path="7-breakpoints.html">
            
                <a href="7-breakpoints.html">
            
                    
                    6.7 Listing Breakpoints
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.8" data-path="8-clear.html">
            
                <a href="8-clear.html">
            
                    
                    6.8 Removing Breakpoints
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.9" data-path="9-clearall.html">
            
                <a href="9-clearall.html">
            
                    
                    6.9 Clearing All Breakpoints
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.10" data-path="10-step.html">
            
                <a href="10-step.html">
            
                    
                    6.10 Stepping Operations
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.11" data-path="11-continue.html">
            
                <a href="11-continue.html">
            
                    
                    6.11 Running to Breakpoint
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.6.12" data-path="12-pmem.html">
            
                <a href="12-pmem.html">
            
                    
                    6.12 Printing Memory Data
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.13" data-path="13-pregs.html">
            
                <a href="13-pregs.html">
            
                    
                    6.13 Printing Register Data
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.14" data-path="14-set-mem.html">
            
                <a href="14-set-mem.html">
            
                    
                    6.14 Modifying Memory Data
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.15" data-path="15-set-regs.html">
            
                <a href="15-set-regs.html">
            
                    
                    6.15 Modifying Register Data
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.16" data-path="20-trace_new_threads.html">
            
                <a href="20-trace_new_threads.html">
            
                    
                    6.20 Tracing Multi-threaded Programs 1
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.17" data-path="21-trace_old_threads.html">
            
                <a href="21-trace_old_threads.html">
            
                    
                    6.21 Tracing Multi-threaded Programs 2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.18" data-path="80-aslr.html">
            
                <a href="80-aslr.html">
            
                    
                    6.80 Understanding ASLR
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.19" data-path="99-more.html">
            
                <a href="99-more.html">
            
                    
                    6.99 More...
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../7-headto-sym-debugger/">
            
                <a href="../7-headto-sym-debugger/">
            
                    
                    7 Advancing to Symbol-Level Debugger
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../7-headto-sym-debugger/1-how-go-build-works.html">
            
                <a href="../7-headto-sym-debugger/1-how-go-build-works.html">
            
                    
                    7.1 Go Build Internals
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="../7-headto-sym-debugger/2-elf.html">
            
                <a href="../7-headto-sym-debugger/2-elf.html">
            
                    
                    7.2 Understanding ELF Files
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="../7-headto-sym-debugger/3-syms.html">
            
                <a href="../7-headto-sym-debugger/3-syms.html">
            
                    
                    7.3 Symbols & Symbol Tables
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4" data-path="../7-headto-sym-debugger/4-syms-resolve-reloc.html">
            
                <a href="../7-headto-sym-debugger/4-syms-resolve-reloc.html">
            
                    
                    7.4 Symbol Resolution & Relocation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.5" data-path="../7-headto-sym-debugger/5-loading.html">
            
                <a href="../7-headto-sym-debugger/5-loading.html">
            
                    
                    7.5 Loading
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.6" data-path="../7-headto-sym-debugger/6-gopkg-debug/">
            
                <a href="../7-headto-sym-debugger/6-gopkg-debug/">
            
                    
                    7.6 Go Standard Library debug/*
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.6.1" data-path="../7-headto-sym-debugger/6-gopkg-debug/1-elf.html">
            
                <a href="../7-headto-sym-debugger/6-gopkg-debug/1-elf.html">
            
                    
                    7.6.1 debug/elf
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.6.2" data-path="../7-headto-sym-debugger/6-gopkg-debug/2-gosym.html">
            
                <a href="../7-headto-sym-debugger/6-gopkg-debug/2-gosym.html">
            
                    
                    7.6.2 debug/gosym
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.6.3" data-path="../7-headto-sym-debugger/6-gopkg-debug/3-dwarf.html">
            
                <a href="../7-headto-sym-debugger/6-gopkg-debug/3-dwarf.html">
            
                    
                    7.6.3 debug/dwarf
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7.7" data-path="../7-headto-sym-debugger/7-headto-dwarf/">
            
                <a href="../7-headto-sym-debugger/7-headto-dwarf/">
            
                    
                    7.7 Advancing to DWARF
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.7.1" data-path="../7-headto-sym-debugger/7-headto-dwarf/1-gopkgs-about-dwarf.html">
            
                <a href="../7-headto-sym-debugger/7-headto-dwarf/1-gopkgs-about-dwarf.html">
            
                    
                    7.7.1 Related Go Packages
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.7.2" data-path="../7-headto-sym-debugger/7-headto-dwarf/2-delve-into-internals.html">
            
                <a href="../7-headto-sym-debugger/7-headto-dwarf/2-delve-into-internals.html">
            
                    
                    7.7.2 How to Crack Those Details
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.7.3" data-path="../7-headto-sym-debugger/7-headto-dwarf/3-compiler-gen-dwarfdata.html">
            
                <a href="../7-headto-sym-debugger/7-headto-dwarf/3-compiler-gen-dwarfdata.html">
            
                    
                    7.7.3 Compiler Generated DWARF Data
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.7.4" data-path="../7-headto-sym-debugger/7-headto-dwarf/4-linker-gen-dwarfdata.html">
            
                <a href="../7-headto-sym-debugger/7-headto-dwarf/4-linker-gen-dwarfdata.html">
            
                    
                    7.7.4 Linker Generated DWARF Data
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.7.5" data-path="../7-headto-sym-debugger/7-headto-dwarf/5-headto-dwarf.html">
            
                <a href="../7-headto-sym-debugger/7-headto-dwarf/5-headto-dwarf.html">
            
                    
                    7.7.5 Understanding DWARF
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../8-dwarf/">
            
                <a href="../8-dwarf/">
            
                    
                    8 Debug Information Standard: DWARF
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="../8-dwarf/1-history.html">
            
                <a href="../8-dwarf/1-history.html">
            
                    
                    8.1 DWARF Development History
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="../8-dwarf/2-overview.html">
            
                <a href="../8-dwarf/2-overview.html">
            
                    
                    8.2 DWARF Content Overview
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="../8-dwarf/3-dwarfdata.html">
            
                <a href="../8-dwarf/3-dwarfdata.html">
            
                    
                    8.3 DWARF Data Classification
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4" data-path="../8-dwarf/4-die/">
            
                <a href="../8-dwarf/4-die/">
            
                    
                    8.4 DIE Detailed Introduction
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.4.1" data-path="../8-dwarf/4-die/1-desc-data-type.html">
            
                <a href="../8-dwarf/4-die/1-desc-data-type.html">
            
                    
                    8.4.1 DIE Describing Data and Types
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4.2" data-path="../8-dwarf/4-die/2-desc-locations.html">
            
                <a href="../8-dwarf/4-die/2-desc-locations.html">
            
                    
                    8.4.2 Location Data
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4.3" data-path="../8-dwarf/4-die/3-desc-code.html">
            
                <a href="../8-dwarf/4-die/3-desc-code.html">
            
                    
                    8.4.3 DIE Describing Executable Code
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4.4" data-path="../8-dwarf/4-die/4-encoding.html">
            
                <a href="../8-dwarf/4-die/4-encoding.html">
            
                    
                    8.4.4 DIE Data Encoding
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8.5" data-path="../8-dwarf/5-other/">
            
                <a href="../8-dwarf/5-other/">
            
                    
                    8.5 Other Debug Data
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.5.1" data-path="../8-dwarf/5-other/1-accelerated-access.html">
            
                <a href="../8-dwarf/5-other/1-accelerated-access.html">
            
                    
                    8.5.1 Accelerated Access
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.5.2" data-path="../8-dwarf/5-other/2-lineno-table.html">
            
                <a href="../8-dwarf/5-other/2-lineno-table.html">
            
                    
                    8.5.2 Line Number Table Information
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.5.3" data-path="../8-dwarf/5-other/3-callframe-info.html">
            
                <a href="../8-dwarf/5-other/3-callframe-info.html">
            
                    
                    8.5.3 Call Frame Information
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.5.4" data-path="../8-dwarf/5-other/4-macro-info.html">
            
                <a href="../8-dwarf/5-other/4-macro-info.html">
            
                    
                    8.5.4 Macro Information
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.5.5" data-path="../8-dwarf/5-other/5-varlen-data.html">
            
                <a href="../8-dwarf/5-other/5-varlen-data.html">
            
                    
                    8.5.5 Variable Length Data
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.5.6" data-path="../8-dwarf/5-other/6-shrink-data.html">
            
                <a href="../8-dwarf/5-other/6-shrink-data.html">
            
                    
                    8.5.6 Compressed DWARF Data
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.5.7" data-path="../8-dwarf/5-other/7-elf-sections.html">
            
                <a href="../8-dwarf/5-other/7-elf-sections.html">
            
                    
                    8.5.7 ELF Sections
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8.6" data-path="../8-dwarf/6-practices.html">
            
                <a href="../8-dwarf/6-practices.html">
            
                    
                    8.6 DWARF Parsing and Applications
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.7" data-path="../8-dwarf/7-summary.html">
            
                <a href="../8-dwarf/7-summary.html">
            
                    
                    8.7 Summary
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../9-develop-sym-debugger/">
            
                <a href="../9-develop-sym-debugger/">
            
                    
                    9 Developing Go Symbol-Level Debugger
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="../9-develop-sym-debugger/1-架构设计/">
            
                <a href="../9-develop-sym-debugger/1-架构设计/">
            
                    
                    9.1 Architecture Design
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1.1" data-path="../9-develop-sym-debugger/1-架构设计/1-现代调试器架构.html">
            
                <a href="../9-develop-sym-debugger/1-架构设计/1-现代调试器架构.html">
            
                    
                    9.1.1 Modern Debugger Architecture
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.1.2" data-path="../9-develop-sym-debugger/1-架构设计/2-前端UI层设计.html">
            
                <a href="../9-develop-sym-debugger/1-架构设计/2-前端UI层设计.html">
            
                    
                    9.1.2 Frontend UI Layer Design
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.1.3" data-path="../9-develop-sym-debugger/1-架构设计/3-Service层设计.html">
            
                <a href="../9-develop-sym-debugger/1-架构设计/3-Service层设计.html">
            
                    
                    9.1.3 Service Layer Design
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.1.4" data-path="../9-develop-sym-debugger/1-架构设计/4-后端符号层设计.html">
            
                <a href="../9-develop-sym-debugger/1-架构设计/4-后端符号层设计.html">
            
                    
                    9.1.4 Backend Symbol Layer Design
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.1.5" data-path="../9-develop-sym-debugger/1-架构设计/5-后端目标层设计.html">
            
                <a href="../9-develop-sym-debugger/1-架构设计/5-后端目标层设计.html">
            
                    
                    9.1.5 Backend Target Layer Design
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.1.6" data-path="../9-develop-sym-debugger/1-架构设计/6-日志系统设计.html">
            
                <a href="../9-develop-sym-debugger/1-架构设计/6-日志系统设计.html">
            
                    
                    9.1.6 Logging System Design
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9.2" data-path="../9-develop-sym-debugger/2-核心调试逻辑/">
            
                <a href="../9-develop-sym-debugger/2-核心调试逻辑/">
            
                    
                    9.2 Core Debugging Logic
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.2.1" data-path="../9-develop-sym-debugger/2-核心调试逻辑/00-cmds.html">
            
                <a href="../9-develop-sym-debugger/2-核心调试逻辑/00-cmds.html">
            
                    
                    9.2.00 Core Debugging Commands
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.2" data-path="../9-develop-sym-debugger/2-核心调试逻辑/01-debug-session.html">
            
                <a href="../9-develop-sym-debugger/2-核心调试逻辑/01-debug-session.html">
            
                    
                    9.2.01 Opening Debug Session
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.3" data-path="../9-develop-sym-debugger/2-核心调试逻辑/11-tinydbg_attach.html">
            
                <a href="../9-develop-sym-debugger/2-核心调试逻辑/11-tinydbg_attach.html">
            
                    
                    9.2.11 tinydbg attach
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.4" data-path="../9-develop-sym-debugger/2-核心调试逻辑/12-tinydbg_attach_waitfor.html">
            
                <a href="../9-develop-sym-debugger/2-核心调试逻辑/12-tinydbg_attach_waitfor.html">
            
                    
                    9.2.12 tinydbg attach+waitfor
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.5" data-path="../9-develop-sym-debugger/2-核心调试逻辑/13-tinydbg_exec.html">
            
                <a href="../9-develop-sym-debugger/2-核心调试逻辑/13-tinydbg_exec.html">
            
                    
                    9.2.13 tinydbg exec
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.6" data-path="../9-develop-sym-debugger/2-核心调试逻辑/14-tinydbg_debug.html">
            
                <a href="../9-develop-sym-debugger/2-核心调试逻辑/14-tinydbg_debug.html">
            
                    
                    9.2.14 tinydbg debug
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.7" data-path="../9-develop-sym-debugger/2-核心调试逻辑/15-tinydbg_core1.html">
            
                <a href="../9-develop-sym-debugger/2-核心调试逻辑/15-tinydbg_core1.html">
            
                    
                    9.2.15 tinydbg core - part1
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.8" data-path="../9-develop-sym-debugger/2-核心调试逻辑/15-tinydbg_core2.html">
            
                <a href="../9-develop-sym-debugger/2-核心调试逻辑/15-tinydbg_core2.html">
            
                    
                    9.2.15 tinydbg core - part2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.9" data-path="../9-develop-sym-debugger/2-核心调试逻辑/16-tinydbg_connect.html">
            
                <a href="../9-develop-sym-debugger/2-核心调试逻辑/16-tinydbg_connect.html">
            
                    
                    9.2.16 tinydbg connect
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.10" data-path="../9-develop-sym-debugger/2-核心调试逻辑/17-tinydbg_trace.html">
            
                <a href="../9-develop-sym-debugger/2-核心调试逻辑/17-tinydbg_trace.html">
            
                    
                    9.2.17 tinydbg trace
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.11" data-path="../9-develop-sym-debugger/2-核心调试逻辑/21-disassemble.html">
            
                <a href="../9-develop-sym-debugger/2-核心调试逻辑/21-disassemble.html">
            
                    
                    9.2.21 tinydbg> disass
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.12" data-path="../9-develop-sym-debugger/2-核心调试逻辑/22-breakpoint.html">
            
                <a href="../9-develop-sym-debugger/2-核心调试逻辑/22-breakpoint.html">
            
                    
                    9.2.22 tinydbg> breakpoint
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.13" data-path="../9-develop-sym-debugger/2-核心调试逻辑/23-breakpoints.html">
            
                <a href="../9-develop-sym-debugger/2-核心调试逻辑/23-breakpoints.html">
            
                    
                    9.2.23 tinydbg> breakpoints
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.14" data-path="../9-develop-sym-debugger/2-核心调试逻辑/24-clear.html">
            
                <a href="../9-develop-sym-debugger/2-核心调试逻辑/24-clear.html">
            
                    
                    9.2.24 tinydbg> clear | toggle
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.15" data-path="../9-develop-sym-debugger/2-核心调试逻辑/25-clearall.html">
            
                <a href="../9-develop-sym-debugger/2-核心调试逻辑/25-clearall.html">
            
                    
                    9.2.25 tinydbg> clearall
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.16" data-path="../9-develop-sym-debugger/2-核心调试逻辑/26-step.html">
            
                <a href="../9-develop-sym-debugger/2-核心调试逻辑/26-step.html">
            
                    
                    9.2.26 tinydbg> next | step | stepi
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.17" data-path="../9-develop-sym-debugger/2-核心调试逻辑/27-continue.html">
            
                <a href="../9-develop-sym-debugger/2-核心调试逻辑/27-continue.html">
            
                    
                    9.2.27 Continue Execution
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.18" data-path="../9-develop-sym-debugger/2-核心调试逻辑/28-pmem.html">
            
                <a href="../9-develop-sym-debugger/2-核心调试逻辑/28-pmem.html">
            
                    
                    9.2.28 View Memory
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.19" data-path="../9-develop-sym-debugger/2-核心调试逻辑/29-regs.html">
            
                <a href="../9-develop-sym-debugger/2-核心调试逻辑/29-regs.html">
            
                    
                    9.2.29 View Registers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.20" data-path="../9-develop-sym-debugger/2-核心调试逻辑/30-call-frame.html">
            
                <a href="../9-develop-sym-debugger/2-核心调试逻辑/30-call-frame.html">
            
                    
                    9.2.30 Call Frame Information
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.21" data-path="../9-develop-sym-debugger/2-核心调试逻辑/31-vars.html">
            
                <a href="../9-develop-sym-debugger/2-核心调试逻辑/31-vars.html">
            
                    
                    9.2.31 Variables & Type System
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.22" data-path="../9-develop-sym-debugger/2-核心调试逻辑/32-how_listfunctions_work.html">
            
                <a href="../9-develop-sym-debugger/2-核心调试逻辑/32-how_listfunctions_work.html">
            
                    
                    9.2.32 how ListFunctions work
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.23" data-path="../9-develop-sym-debugger/2-核心调试逻辑/32-funcs.html">
            
                <a href="../9-develop-sym-debugger/2-核心调试逻辑/32-funcs.html">
            
                    
                    9.2.32 funcs
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.24" data-path="../9-develop-sym-debugger/2-核心调试逻辑/33-goroutines.html">
            
                <a href="../9-develop-sym-debugger/2-核心调试逻辑/33-goroutines.html">
            
                    
                    9.2.33 Goroutines
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.25" data-path="../9-develop-sym-debugger/2-核心调试逻辑/34-multi-threads.html">
            
                <a href="../9-develop-sym-debugger/2-核心调试逻辑/34-multi-threads.html">
            
                    
                    9.2.34 Tracing Multi-threaded Programs
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9.3" data-path="../9-develop-sym-debugger/3-高级功能扩展/">
            
                <a href="../9-develop-sym-debugger/3-高级功能扩展/">
            
                    
                    9.3 Advanced Feature Extensions
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.3.1" data-path="../9-develop-sym-debugger/3-高级功能扩展/100-howto_integrate_starlark.html">
            
                <a href="../9-develop-sym-debugger/3-高级功能扩展/100-howto_integrate_starlark.html">
            
                    
                    9.3.100 Integrating starlark
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3.2" data-path="../9-develop-sym-debugger/3-高级功能扩展/101-howto_tracing_via_ebpf.html">
            
                <a href="../9-develop-sym-debugger/3-高级功能扩展/101-howto_tracing_via_ebpf.html">
            
                    
                    9.3.101 Tracing with eBPF
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3.3" data-path="../9-develop-sym-debugger/3-高级功能扩展/102-howto_syntax_highlight.html">
            
                <a href="../9-develop-sym-debugger/3-高级功能扩展/102-howto_syntax_highlight.html">
            
                    
                    9.3.102 Implementing Syntax Highlighting
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3.4" data-path="../9-develop-sym-debugger/3-高级功能扩展/103-howto_paging_output.html">
            
                <a href="../9-develop-sym-debugger/3-高级功能扩展/103-howto_paging_output.html">
            
                    
                    9.3.103 Implementing Paged Output
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3.5" data-path="../9-develop-sym-debugger/3-高级功能扩展/104-howto_read_separate_dwarfdata.html">
            
                <a href="../9-develop-sym-debugger/3-高级功能扩展/104-howto_read_separate_dwarfdata.html">
            
                    
                    9.3.104 Reading Separately Stored DWARF Data
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3.6" data-path="../9-develop-sym-debugger/3-高级功能扩展/105-howto_guess_substitutepath.html">
            
                <a href="../9-develop-sym-debugger/3-高级功能扩展/105-howto_guess_substitutepath.html">
            
                    
                    9.3.105 Automatic Source File Path Mapping
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3.7" data-path="../9-develop-sym-debugger/3-高级功能扩展/106-howto_redirect_target_io.html">
            
                <a href="../9-develop-sym-debugger/3-高级功能扩展/106-howto_redirect_target_io.html">
            
                    
                    9.3.106 Implementing Target Process IO Redirection
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3.8" data-path="../9-develop-sym-debugger/3-高级功能扩展/107-howto_customize_tinydbg.html">
            
                <a href="../9-develop-sym-debugger/3-高级功能扩展/107-howto_customize_tinydbg.html">
            
                    
                    9.3.107 Supporting User Preferences
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3.9" data-path="../9-develop-sym-debugger/3-高级功能扩展/108-howto_accept_multiclient.html">
            
                <a href="../9-develop-sym-debugger/3-高级功能扩展/108-howto_accept_multiclient.html">
            
                    
                    9.3.108 Supporting Multi-client Debug Mode
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3.10" data-path="../9-develop-sym-debugger/3-高级功能扩展/109-howto_transcript_debugging.html">
            
                <a href="../9-develop-sym-debugger/3-高级功能扩展/109-howto_transcript_debugging.html">
            
                    
                    9.3.109 Supporting Debug Activity Logging
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../10-extras/">
            
                <a href="../10-extras/">
            
                    
                    10 Mainstream Debugging Technology Analysis
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="../10-extras/1-development-of-debugger.html">
            
                <a href="../10-extras/1-development-of-debugger.html">
            
                    
                    10.1 Debugger Development History
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="../10-extras/2-development-of-logging.html">
            
                <a href="../10-extras/2-development-of-logging.html">
            
                    
                    10.2 Logging System Development History
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.3" data-path="../10-extras/3-development-of-metrics.html">
            
                <a href="../10-extras/3-development-of-metrics.html">
            
                    
                    10.3 Metrics System Development History
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.4" data-path="../10-extras/4-development-of-tracing.html">
            
                <a href="../10-extras/4-development-of-tracing.html">
            
                    
                    10.4 Tracing System Development History
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.5" data-path="../10-extras/5-development-of-bisect.html">
            
                <a href="../10-extras/5-development-of-bisect.html">
            
                    
                    10.5 Bisect Development History
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.6" data-path="../10-extras/6-development-of-ebpf.html">
            
                <a href="../10-extras/6-development-of-ebpf.html">
            
                    
                    10.6 eBPF Development History
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.7" data-path="../10-extras/7-development-of-replay.html">
            
                <a href="../10-extras/7-development-of-replay.html">
            
                    
                    10.7 Record and Replay Development History
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.8" data-path="../10-extras/8-development-of-debug-dsys.html">
            
                <a href="../10-extras/8-development-of-debug-dsys.html">
            
                    
                    10.8 Distributed Debugging Development History
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="../11-thanks/">
            
                <a href="../11-thanks/">
            
                    
                    11 Acknowledgments
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="../12-appendix/">
            
                <a href="../12-appendix/">
            
                    
                    12 Appendix
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.1" data-path="../12-appendix/1-go-programme-start.html">
            
                <a href="../12-appendix/1-go-programme-start.html">
            
                    
                    12.1 Go Program Startup Process
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.2" data-path="../12-appendix/2-auto-trace-cloned-threads.html">
            
                <a href="../12-appendix/2-auto-trace-cloned-threads.html">
            
                    
                    12.2 Automatic Thread Tracing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.3" data-path="../12-appendix/3-git-bisect.html">
            
                <a href="../12-appendix/3-git-bisect.html">
            
                    
                    12.3 git bisect
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.4" data-path="../12-appendix/80-go-tool-compile.html">
            
                <a href="../12-appendix/80-go-tool-compile.html">
            
                    
                    12.10 Compilation Toolchain/compile
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.5" data-path="../12-appendix/81-go-tool-asm.html">
            
                <a href="../12-appendix/81-go-tool-asm.html">
            
                    
                    12.11 Compilation Toolchain/asm
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.6" data-path="../12-appendix/82-go-tool-link.html">
            
                <a href="../12-appendix/82-go-tool-link.html">
            
                    
                    12.12 Compilation Toolchain/link
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.7" data-path="../12-appendix/90-why-buildid-loaded.html">
            
                <a href="../12-appendix/90-why-buildid-loaded.html">
            
                    
                    12.13 More: GNU build-id+gobuildid
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.8" data-path="../12-appendix/91-syntax-and-semantic-analysis.html">
            
                <a href="../12-appendix/91-syntax-and-semantic-analysis.html">
            
                    
                    12.14 More: Syntax Analysis vs Semantic Analysis
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.9" data-path="../12-appendix/92-why-gdb-uses-symtab.html">
            
                <a href="../12-appendix/92-why-gdb-uses-symtab.html">
            
                    
                    12.15 More: Why GDB Uses Symbol Table+DWARF
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >6.12 Printing Memory Data</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h2 id="viewing-process-state-memory">Viewing Process State (Memory)</h2>
<h3 id="implementation-goal-pmem-memory-data-reading">Implementation Goal: pmem Memory Data Reading</h3>
<p>In this section, we will implement the pmem command to facilitate viewing process memory data during debugging.</p>
<h3 id="basic-knowledge">Basic Knowledge</h3>
<p>We know that data in memory is a sequence of 0s and 1s. To correctly display memory data, we need to pay attention to these basic considerations:</p>
<ul>
<li>The sequence of 0s and 1s is not the final form; data has types, and we need to interpret the data in memory according to its data type;</li>
<li>Data storage in different machines has byte order: little-endian (lower bits at lower addresses) or big-endian (lower bits at higher addresses);</li>
</ul>
<p>pmem reads a segment of data starting from a specified memory address, groups it into integers according to the specified number of bytes, and prints it in binary, octal, decimal, or hexadecimal format. Unlike the common variable viewing operation <code>print &lt;var&gt;</code>, it doesn&apos;t consider what data type the data at the specified location is (such as a <code>struct{...}</code>, <code>slice</code>, or <code>map</code>). pmem is similar to the <code>x/fmt</code> operation in gdb.</p>
<p>To view process memory data, we need to use the <code>ptrace(PTRACE_PEEKDATA,...)</code> operation to read the memory data of the debugged process.</p>
<h3 id="code-implementation">Code Implementation</h3>
<h4 id="step-1-implement-process-memory-data-reading">Step 1: Implement Process Memory Data Reading</h4>
<p>First, we implement memory data reading through the <code>ptrace(PTRACE_PEEKDATA,...)</code> system call. The amount of data read each time can be calculated from count and size:</p>
<ul>
<li>size represents how many bytes each data item to be read and displayed includes;</li>
<li>count represents how many such data items to read and display consecutively;</li>
</ul>
<p>For example, an int data item might contain 4 bytes, and to display 8 int numbers, you would specify <code>-size=4 -count=8</code>.</p>
<p>The following program reads memory data and prints the read byte data in hexadecimal format.</p>
<p><strong>file: cmd/debug/pmem.go</strong></p>
<pre><code class="lang-go"><span class="hljs-keyword">package</span> debug

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">&quot;errors&quot;</span>
    <span class="hljs-string">&quot;fmt&quot;</span>
    <span class="hljs-string">&quot;strconv&quot;</span>
    <span class="hljs-string">&quot;syscall&quot;</span>

    <span class="hljs-string">&quot;github.com/spf13/cobra&quot;</span>
)

<span class="hljs-keyword">var</span> pmemCmd = &amp;cobra.Command{
    Use:   <span class="hljs-string">&quot;pmem &quot;</span>,
    Short: <span class="hljs-string">&quot;Print memory data&quot;</span>,
    Annotations: <span class="hljs-keyword">map</span>[<span class="hljs-keyword">string</span>]<span class="hljs-keyword">string</span>{
        cmdGroupKey: cmdGroupInfo,
    },
    RunE: <span class="hljs-keyword">func</span>(cmd *cobra.Command, args []<span class="hljs-keyword">string</span>) error {

        count, _ := cmd.Flags().GetUint(<span class="hljs-string">&quot;count&quot;</span>)
        format, _ := cmd.Flags().GetString(<span class="hljs-string">&quot;fmt&quot;</span>)
        size, _ := cmd.Flags().GetUint(<span class="hljs-string">&quot;size&quot;</span>)
        addr, _ := cmd.Flags().GetString(<span class="hljs-string">&quot;addr&quot;</span>)

        <span class="hljs-comment">// check params</span>
        err := checkPmemArgs(count, format, size, addr)
        <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
            <span class="hljs-keyword">return</span> err
        }

        <span class="hljs-comment">// calculate size of memory to read</span>
        readAt, _ := strconv.ParseUint(addr, <span class="hljs-number">0</span>, <span class="hljs-number">64</span>)
        bytes := count * size

        buf := <span class="hljs-built_in">make</span>([]<span class="hljs-keyword">byte</span>, bytes, bytes)
        n, err := syscall.PtracePeekData(TraceePID, <span class="hljs-keyword">uintptr</span>(readAt), buf)
        <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> || n != <span class="hljs-keyword">int</span>(bytes) {
            <span class="hljs-keyword">return</span> fmt.Errorf(<span class="hljs-string">&quot;read %d bytes, error: %v&quot;</span>, n, err)
        }

        <span class="hljs-comment">// print result</span>
        fmt.Printf(<span class="hljs-string">&quot;read %d bytes ok:&quot;</span>, n)
        <span class="hljs-keyword">for</span> _, b := <span class="hljs-keyword">range</span> buf[:n] {
            fmt.Printf(<span class="hljs-string">&quot;%x&quot;</span>, b)
        }
        fmt.Println()

        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>
    },
}

<span class="hljs-keyword">func</span> init() {
    debugRootCmd.AddCommand(pmemCmd)
    <span class="hljs-comment">// Similar to gdb&apos;s x/FMT command, where FMT=repeat number+format modifier+size</span>
    pmemCmd.Flags().Uint(<span class="hljs-string">&quot;count&quot;</span>, <span class="hljs-number">16</span>, <span class="hljs-string">&quot;Number of values to view&quot;</span>)
    pmemCmd.Flags().String(<span class="hljs-string">&quot;fmt&quot;</span>, <span class="hljs-string">&quot;hex&quot;</span>, <span class="hljs-string">&quot;Value print format: b(binary), o(octal), x(hex), d(decimal), ud(unsigned decimal)&quot;</span>)
    pmemCmd.Flags().Uint(<span class="hljs-string">&quot;size&quot;</span>, <span class="hljs-number">4</span>, <span class="hljs-string">&quot;Bytes per value&quot;</span>)
    pmemCmd.Flags().String(<span class="hljs-string">&quot;addr&quot;</span>, <span class="hljs-string">&quot;&quot;</span>, <span class="hljs-string">&quot;Memory address to read&quot;</span>)
}

<span class="hljs-keyword">func</span> checkPmemArgs(count <span class="hljs-keyword">uint</span>, format <span class="hljs-keyword">string</span>, size <span class="hljs-keyword">uint</span>, addr <span class="hljs-keyword">string</span>) error {
    <span class="hljs-keyword">if</span> count == <span class="hljs-number">0</span> {
        <span class="hljs-keyword">return</span> errors.New(<span class="hljs-string">&quot;invalid count&quot;</span>)
    }
    <span class="hljs-keyword">if</span> size == <span class="hljs-number">0</span> {
        <span class="hljs-keyword">return</span> errors.New(<span class="hljs-string">&quot;invalid size&quot;</span>)
    }
    formats := <span class="hljs-keyword">map</span>[<span class="hljs-keyword">string</span>]<span class="hljs-keyword">struct</span>{}{
        <span class="hljs-string">&quot;b&quot;</span>:  {},
        <span class="hljs-string">&quot;o&quot;</span>:  {},
        <span class="hljs-string">&quot;x&quot;</span>:  {},
        <span class="hljs-string">&quot;d&quot;</span>:  {},
        <span class="hljs-string">&quot;ud&quot;</span>: {},
    }
    <span class="hljs-keyword">if</span> _, ok := formats[format]; !ok {
        <span class="hljs-keyword">return</span> errors.New(<span class="hljs-string">&quot;invalid format&quot;</span>)
    }
    <span class="hljs-comment">// TODO make it compatible</span>
    _, err := strconv.ParseUint(addr, <span class="hljs-number">0</span>, <span class="hljs-number">64</span>)
    <span class="hljs-keyword">return</span> err
}
</code></pre>
<h4 id="step-2-determine-byte-order-and-value-parsing">Step 2: Determine Byte Order and Value Parsing</h4>
<pre><code class="lang-go"><span class="hljs-comment">// Check if the system is little-endian</span>
<span class="hljs-keyword">func</span> isLittleEndian() <span class="hljs-keyword">bool</span> {
    buf := [<span class="hljs-number">2</span>]<span class="hljs-keyword">byte</span>{}
    *(*<span class="hljs-keyword">uint16</span>)(unsafe.Pointer(&amp;buf[<span class="hljs-number">0</span>])) = <span class="hljs-keyword">uint16</span>(<span class="hljs-number">0xABCD</span>)

    <span class="hljs-keyword">switch</span> buf {
    <span class="hljs-keyword">case</span> [<span class="hljs-number">2</span>]<span class="hljs-keyword">byte</span>{<span class="hljs-number">0xCD</span>, <span class="hljs-number">0xAB</span>}:
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
    <span class="hljs-keyword">case</span> [<span class="hljs-number">2</span>]<span class="hljs-keyword">byte</span>{<span class="hljs-number">0xAB</span>, <span class="hljs-number">0xCD</span>}:
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
    <span class="hljs-keyword">default</span>:
        <span class="hljs-built_in">panic</span>(<span class="hljs-string">&quot;Could not determine native endianness.&quot;</span>)
    }
}

<span class="hljs-comment">// Convert byte slice to uint64 value, considering byte order</span>
<span class="hljs-keyword">func</span> byteArrayToUInt64(buf []<span class="hljs-keyword">byte</span>, isLittleEndian <span class="hljs-keyword">bool</span>) <span class="hljs-keyword">uint64</span> {
    <span class="hljs-keyword">var</span> n <span class="hljs-keyword">uint64</span>
    <span class="hljs-keyword">if</span> isLittleEndian {
        <span class="hljs-keyword">for</span> i := <span class="hljs-built_in">len</span>(buf) - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i-- {
            n = n&lt;&lt;<span class="hljs-number">8</span> + <span class="hljs-keyword">uint64</span>(buf[i])
        }
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-built_in">len</span>(buf); i++ {
            n = n&lt;&lt;<span class="hljs-number">8</span> + <span class="hljs-keyword">uint64</span>(buf[i])
        }
    }
    <span class="hljs-keyword">return</span> n
}
</code></pre>
<h4 id="step-3-implement-data-type-parsing">Step 3: Implement Data &quot;Type&quot; Parsing</h4>
<p>The data read from memory should be grouped and parsed according to the number of bytes per data item <code>-size</code> and the display format <code>-fmt</code>. We also need to consider the terminal column width issues when displaying binary, octal, decimal, and hexadecimal numbers. With limited columns per line, the number of numbers that can be displayed per line varies depending on the number system used.</p>
<pre><code class="lang-go"><span class="hljs-keyword">package</span> debug
...

<span class="hljs-keyword">var</span> pmemCmd = &amp;cobra.Command{
    Use:   <span class="hljs-string">&quot;pmem &quot;</span>,
    Short: <span class="hljs-string">&quot;Print memory data&quot;</span>,
    Annotations: <span class="hljs-keyword">map</span>[<span class="hljs-keyword">string</span>]<span class="hljs-keyword">string</span>{
        cmdGroupKey: cmdGroupInfo,
    },
    RunE: <span class="hljs-keyword">func</span>(cmd *cobra.Command, args []<span class="hljs-keyword">string</span>) error {
        ...

        <span class="hljs-comment">// This function prints data with beautiful tab+padding alignment</span>
        s := prettyPrintMem(<span class="hljs-keyword">uintptr</span>(readAt), buf, isLittleEndian(), format[<span class="hljs-number">0</span>], <span class="hljs-keyword">int</span>(size))
        fmt.Println(s)

        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>
    },
}

...

<span class="hljs-comment">// prettyPrintMem uses tabwriter to control alignment.</span>
<span class="hljs-comment">//</span>
<span class="hljs-comment">// Note that after appropriate formatting for binary, octal, decimal, and hexadecimal display,</span>
<span class="hljs-comment">// the output will look more aesthetically pleasing</span>
<span class="hljs-keyword">func</span> prettyPrintMem(address <span class="hljs-keyword">uintptr</span>, memArea []<span class="hljs-keyword">byte</span>, littleEndian <span class="hljs-keyword">bool</span>, format <span class="hljs-keyword">byte</span>, size <span class="hljs-keyword">int</span>) <span class="hljs-keyword">string</span> {

    <span class="hljs-keyword">var</span> (
        cols      <span class="hljs-keyword">int</span>         <span class="hljs-comment">// Number of columns per line for different number systems (e.g., cols=4, 1 2 3 4)</span>
        colFormat <span class="hljs-keyword">string</span>     <span class="hljs-comment">// Format for each column number in different number systems (e.g., %08b, 00000001)</span>
        colBytes  = size    <span class="hljs-comment">// Bytes per column number (e.g., 2, needs 2 bytes, considering byte order)</span>

        addrLen <span class="hljs-keyword">int</span>
        addrFmt <span class="hljs-keyword">string</span>
    )

    <span class="hljs-keyword">switch</span> format {
    <span class="hljs-keyword">case</span> <span class="hljs-string">&apos;b&apos;</span>:
        cols = <span class="hljs-number">4</span> <span class="hljs-comment">// Avoid emitting rows that are too long when using binary format</span>
        colFormat = fmt.Sprintf(<span class="hljs-string">&quot;%%0%db&quot;</span>, colBytes*<span class="hljs-number">8</span>)
    <span class="hljs-keyword">case</span> <span class="hljs-string">&apos;o&apos;</span>:
        cols = <span class="hljs-number">8</span>
        colFormat = fmt.Sprintf(<span class="hljs-string">&quot;0%%0%do&quot;</span>, colBytes*<span class="hljs-number">3</span>) <span class="hljs-comment">// Always keep one leading zero for octal.</span>
    <span class="hljs-keyword">case</span> <span class="hljs-string">&apos;d&apos;</span>:
        cols = <span class="hljs-number">8</span>
        colFormat = fmt.Sprintf(<span class="hljs-string">&quot;%%0%dd&quot;</span>, colBytes*<span class="hljs-number">3</span>)
    <span class="hljs-keyword">case</span> <span class="hljs-string">&apos;x&apos;</span>:
        cols = <span class="hljs-number">8</span>
        colFormat = fmt.Sprintf(<span class="hljs-string">&quot;0x%%0%dx&quot;</span>, colBytes*<span class="hljs-number">2</span>) <span class="hljs-comment">// Always keep one leading &apos;0x&apos; for hex.</span>
    <span class="hljs-keyword">default</span>:
        <span class="hljs-keyword">return</span> fmt.Sprintf(<span class="hljs-string">&quot;not supprted format %q\n&quot;</span>, <span class="hljs-keyword">string</span>(format))
    }
    colFormat += <span class="hljs-string">&quot;\t&quot;</span>

    <span class="hljs-comment">// the number of rows to print</span>
    l := <span class="hljs-built_in">len</span>(memArea)
    rows := l / (cols * colBytes)
    <span class="hljs-keyword">if</span> l%(cols*colBytes) != <span class="hljs-number">0</span> {
        rows++
    }

    <span class="hljs-comment">// We should print memory address in the beginnning of every line.</span>
    <span class="hljs-comment">// And we should use fixed length bytes to print the address for </span>
    <span class="hljs-comment">// better readability.</span>
    <span class="hljs-keyword">if</span> l != <span class="hljs-number">0</span> {
        addrLen = <span class="hljs-built_in">len</span>(fmt.Sprintf(<span class="hljs-string">&quot;%x&quot;</span>, <span class="hljs-keyword">uint64</span>(address)+<span class="hljs-keyword">uint64</span>(l)))
    }
    addrFmt = <span class="hljs-string">&quot;0x%0&quot;</span> + strconv.Itoa(addrLen) + <span class="hljs-string">&quot;x:\t&quot;</span>

    <span class="hljs-comment">// use tabwriter to print lines with columns aligned vertically.</span>
    <span class="hljs-keyword">var</span> b strings.Builder
    w := tabwriter.NewWriter(&amp;b, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">3</span>, <span class="hljs-string">&apos; &apos;</span>, <span class="hljs-number">0</span>)

    <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; rows; i++ {
        fmt.Fprintf(w, addrFmt, address)

        <span class="hljs-keyword">for</span> j := <span class="hljs-number">0</span>; j &lt; cols; j++ {
            offset := i*(cols*colBytes) + j*colBytes
            <span class="hljs-keyword">if</span> offset+colBytes &lt;= <span class="hljs-built_in">len</span>(memArea) {
                n := byteArrayToUInt64(memArea[offset:offset+colBytes], littleEndian)
                fmt.Fprintf(w, colFormat, n)
            }
        }
        fmt.Fprintln(w, <span class="hljs-string">&quot;&quot;</span>)
        address += <span class="hljs-keyword">uintptr</span>(cols)
    }
    w.Flush()
    <span class="hljs-keyword">return</span> b.String()
}
</code></pre>
<p>Read file: book/6-develop-inst-debugger/12-pmem.md
Here is the English translation for the remainder of <code>12-pmem.md</code>, maintaining the structure, formatting, and technical accuracy:</p>
<hr>
<p>The above code keeps the memory reading logic unchanged, but mainly adds two parts:</p>
<ul>
<li>Correctly parses the data read from memory according to the machine&apos;s endianness and converts it into the corresponding value;</li>
<li>Formats the value according to the display base (binary, octal, decimal, hexadecimal), and uses <code>tabwriter</code> for tab+padding alignment to output the result more aesthetically;</li>
</ul>
<p>With this, the development of the <code>pmem</code> command is basically complete. Let&apos;s test the execution of <code>pmem</code>.</p>
<h3 id="code-testing">Code Testing</h3>
<h4 id="test-memory-data-reading">Test: Memory Data Reading</h4>
<p>First, run a test program to get its pid, then run <code>godbg attach &lt;pid&gt;</code> to trace the target process. Once the debug session is ready, use <code>disass</code> to check the disassembly. You will see many <code>int3</code> instructions, whose corresponding byte data is <code>0xCC</code>. We can read one byte at the address of such an instruction to quickly verify if <code>pmem</code> works correctly.</p>
<pre><code class="lang-bash">$ godbg attach 7764
process 7764 attached succ
process 7764 stopped: <span class="hljs-literal">true</span>
godbg&gt; disass
0x4651e0 mov %eax,0x20(%rsp)
0x4651e4 retq
0x4651e5 int3
0x4651e6 int3
0x4651e7 int3
0x4651e8 int3
0x4651e9 int3
0x4651ea int3
0x4651eb int3
0x4651ec int3
godbg&gt; pmem --addr 0x4651e5 --count 1 --fmt x --size 1
<span class="hljs-built_in">read</span> 1 bytes ok:cc
godbg&gt; pmem --addr 0x4651e5 --count 4 --fmt x --size 1
<span class="hljs-built_in">read</span> 4 bytes ok:cccccccc
godbg&gt;
</code></pre>
<p>As you can see, the program first reads 1 byte from address 0x4561e5, which is the hexadecimal 0xCC for one <code>int3</code> instruction, and then reads 4 bytes from the same address, which are four consecutive <code>int3</code> instructions corresponding to 0xCCCCCCCC.</p>
<p>The results are as expected, indicating that the basic memory data reading function of <code>pmem</code> works correctly.</p>
<h4 id="test-data-type-parsing">Test: Data &quot;Type&quot; Parsing</h4>
<p>View hexadecimal numbers, each as 1 byte or 2 bytes, note the little-endian byte order:</p>
<pre><code class="lang-bash">godbg&gt; pmem --addr 0x464<span class="hljs-built_in">fc</span>3 --count 16 --fmt x --size 1
<span class="hljs-built_in">read</span> 16 bytes ok:
0x464<span class="hljs-built_in">fc</span>3:   0x89   0x44   0x24   0x30   0xc3   0xcc   0xcc   0xcc   
0x464fcb:   0xcc   0xcc   0xcc   0xcc   0xcc   0xcc   0xcc   0xcc   

godbg&gt; pmem --addr 0x464<span class="hljs-built_in">fc</span>3 --count 16 --fmt x --size 2
<span class="hljs-built_in">read</span> 32 bytes ok:
0x464<span class="hljs-built_in">fc</span>3:   0x4489   0x3024   0xccc3   0xcccc   0xcccc   0xcccc   0xcccc   0xcccc   
0x464fcb:   0xcccc   0xcccc   0xcccc   0xcccc   0xcccc   0xcccc   0x8bcc   0x247c
</code></pre>
<p>View octal numbers, each as 1 byte or 2 bytes, note the little-endian byte order:</p>
<pre><code class="lang-bash">godbg&gt; pmem --addr 0x464<span class="hljs-built_in">fc</span>3 --count 16 --fmt o --size 1
<span class="hljs-built_in">read</span> 16 bytes ok:
0x464<span class="hljs-built_in">fc</span>3:   0211   0104   0044   0060   0303   0314   0314   0314   
0x464fcb:   0314   0314   0314   0314   0314   0314   0314   0314   

godbg&gt; pmem --addr 0x464<span class="hljs-built_in">fc</span>3 --count 16 --fmt o --size 2
<span class="hljs-built_in">read</span> 32 bytes ok:
0x464<span class="hljs-built_in">fc</span>3:   0042211   0030044   0146303   0146314   0146314   0146314   0146314   0146314   
0x464fcb:   0146314   0146314   0146314   0146314   0146314   0146314   0105714   0022174
</code></pre>
<p>View binary numbers, each as 1 byte or 2 bytes, note the little-endian byte order:</p>
<pre><code class="lang-bash">godbg&gt; pmem --addr 0x464<span class="hljs-built_in">fc</span>3 --count 16 --fmt b --size 1
<span class="hljs-built_in">read</span> 16 bytes ok:
0x464<span class="hljs-built_in">fc</span>3:   10001001   01000100   00100100   00110000   
0x464<span class="hljs-built_in">fc</span>7:   11000011   11001100   11001100   11001100   
0x464fcb:   11001100   11001100   11001100   11001100   
0x464fcf:   11001100   11001100   11001100   11001100   

godbg&gt; pmem --addr 0x464<span class="hljs-built_in">fc</span>3 --count 16 --fmt b --size 2
<span class="hljs-built_in">read</span> 32 bytes ok:
0x464<span class="hljs-built_in">fc</span>3:   0100010010001001   0011000000100100   1100110011000011   1100110011001100   
0x464<span class="hljs-built_in">fc</span>7:   1100110011001100   1100110011001100   1100110011001100   1100110011001100   
0x464fcb:   1100110011001100   1100110011001100   1100110011001100   1100110011001100   
0x464fcf:   1100110011001100   1100110011001100   1000101111001100   0010010001111100
</code></pre>
<p>Finally, view decimal numbers, each as 1 byte or 2 bytes, note the little-endian byte order:</p>
<pre><code class="lang-bash">godbg&gt; pmem --addr 0x464<span class="hljs-built_in">fc</span>3 --count 16 --fmt d --size 1
<span class="hljs-built_in">read</span> 16 bytes ok:
0x464<span class="hljs-built_in">fc</span>3:   137   068   036   048   195   204   204   204   
0x464fcb:   204   204   204   204   204   204   204   204   

godbg&gt; pmem --addr 0x464<span class="hljs-built_in">fc</span>3 --count 16 --fmt d --size 2
<span class="hljs-built_in">read</span> 32 bytes ok:
0x464<span class="hljs-built_in">fc</span>3:   017545   012324   052419   052428   052428   052428   052428   052428   
0x464fcb:   052428   052428   052428   052428   052428   052428   035788   009340
</code></pre>
<p>The <code>pmem</code> command can now correctly parse memory data of different formats, sizes, and endianness.</p>
<p>The results are as expected, indicating that the data reading, parsing, and display functions of <code>pmem</code> all work correctly.</p>
<blockquote>
<p>ps: The logic of <code>prettyPrintMem</code> here is actually taken from the <code>examinemem(x)</code> command contributed to <code>go-delve/delve</code>. If you are interested in data conversion caused by endianness, you can verify the correctness of the data, and it may be more convenient to check with hexadecimal data.</p>
</blockquote>
<h3 id="summary">Summary</h3>
<p>This article introduced how to read data from a specified memory address, how to efficiently determine machine endianness, how to parse values under different endianness, and how to format and display them in different number systems. Here, we also used the handy <code>tabwriter</code> package from the Go standard library, which supports column-aligned output, making the output clearer and easier to read.</p>
<p>In the subsequent symbol-level debugging section, we will also need to implement the function of printing arbitrary variable values. After reading memory data, we will need other techniques to help parse it into the corresponding data types in high-level languages. Next, let&apos;s see how to read register-related data.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="11-continue.html" class="navigation navigation-prev " aria-label="Previous page: 6.11 Running to Breakpoint">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="13-pregs.html" class="navigation navigation-next " aria-label="Next page: 6.13 Printing Register Data">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"6.12 Printing Memory Data","level":"1.6.12","depth":2,"next":{"title":"6.13 Printing Register Data","level":"1.6.13","depth":2,"path":"6-develop-inst-debugger/13-pregs.md","ref":"6-develop-inst-debugger/13-pregs.md","articles":[]},"previous":{"title":"6.11 Running to Breakpoint","level":"1.6.11","depth":2,"path":"6-develop-inst-debugger/11-continue.md","ref":"6-develop-inst-debugger/11-continue.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["md-toc"],"pluginsConfig":{"intopic-toc":{"selector":".markdown-section h1, .markdown-section h2, .markdown-section h3, .markdown-section h4, .markdown-section h5, .markdown-section h6","visible":true,"label":{"en":"In This Article","zh":"本文目录"}},"md-toc":{"label":"In this article","selector":".markdown-section h2","visible":true},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"6-develop-inst-debugger/12-pmem.md","mtime":"2025-06-15T09:24:06.746Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2025-06-15T18:01:33.391Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-md-toc/anchor.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-md-toc/gumshoe.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-md-toc/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>



<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>6.20 Tracing Multi-threaded Programs 1 Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-md-toc/style.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="21-trace_old_threads.html" />
    
    
    <link rel="prev" href="15-set-regs.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    1 Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../2-preface/">
            
                <a href="../2-preface/">
            
                    
                    2 Preface
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../3-terms/">
            
                <a href="../3-terms/">
            
                    
                    3 Common Terms
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../4-basics/">
            
                <a href="../4-basics/">
            
                    
                    4 Software Debugging Basics
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../4-basics/1-purposes.html">
            
                <a href="../4-basics/1-purposes.html">
            
                    
                    4.1 Debugging Purposes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../4-basics/2-dependencies.html">
            
                <a href="../4-basics/2-dependencies.html">
            
                    
                    4.2 Debugging Dependencies
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../4-basics/3-countertactics.html">
            
                <a href="../4-basics/3-countertactics.html">
            
                    
                    4.3 Anti-Debugging Techniques
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../5-debugger-skeleton/">
            
                <a href="../5-debugger-skeleton/">
            
                    
                    5 Entering Debugger Development
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../5-debugger-skeleton/1-debugger_skeleton.html">
            
                <a href="../5-debugger-skeleton/1-debugger_skeleton.html">
            
                    
                    5.1 Debugger Overview
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../5-debugger-skeleton/2-debugger_demo.html">
            
                <a href="../5-debugger-skeleton/2-debugger_demo.html">
            
                    
                    5.2 Debugger Example
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="./">
            
                <a href="./">
            
                    
                    6 Developing Go Instruction-Level Debugger
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="1-process_start.html">
            
                <a href="1-process_start.html">
            
                    
                    6.1 Process Launch
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="2-process_attach.html">
            
                <a href="2-process_attach.html">
            
                    
                    6.2 Process Attach
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="3-process_start_attach.html">
            
                <a href="3-process_start_attach.html">
            
                    
                    6.3 Launch & Attach
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="4-debug-session.html">
            
                <a href="4-debug-session.html">
            
                    
                    6.4 Debug Session
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5" data-path="5-disassemble.html">
            
                <a href="5-disassemble.html">
            
                    
                    6.5 Disassembly
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.6" data-path="6-breakpoint.html">
            
                <a href="6-breakpoint.html">
            
                    
                    6.6 Adding Breakpoints
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.7" data-path="7-breakpoints.html">
            
                <a href="7-breakpoints.html">
            
                    
                    6.7 Listing Breakpoints
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.8" data-path="8-clear.html">
            
                <a href="8-clear.html">
            
                    
                    6.8 Removing Breakpoints
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.9" data-path="9-clearall.html">
            
                <a href="9-clearall.html">
            
                    
                    6.9 Clearing All Breakpoints
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.10" data-path="10-step.html">
            
                <a href="10-step.html">
            
                    
                    6.10 Stepping Operations
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.11" data-path="11-continue.html">
            
                <a href="11-continue.html">
            
                    
                    6.11 Running to Breakpoint
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.12" data-path="12-pmem.html">
            
                <a href="12-pmem.html">
            
                    
                    6.12 Printing Memory Data
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.13" data-path="13-pregs.html">
            
                <a href="13-pregs.html">
            
                    
                    6.13 Printing Register Data
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.14" data-path="14-set-mem.html">
            
                <a href="14-set-mem.html">
            
                    
                    6.14 Modifying Memory Data
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.15" data-path="15-set-regs.html">
            
                <a href="15-set-regs.html">
            
                    
                    6.15 Modifying Register Data
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.6.16" data-path="20-trace_new_threads.html">
            
                <a href="20-trace_new_threads.html">
            
                    
                    6.20 Tracing Multi-threaded Programs 1
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.17" data-path="21-trace_old_threads.html">
            
                <a href="21-trace_old_threads.html">
            
                    
                    6.21 Tracing Multi-threaded Programs 2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.18" data-path="80-aslr.html">
            
                <a href="80-aslr.html">
            
                    
                    6.80 Understanding ASLR
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.19" data-path="99-more.html">
            
                <a href="99-more.html">
            
                    
                    6.99 More...
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../7-headto-sym-debugger/">
            
                <a href="../7-headto-sym-debugger/">
            
                    
                    7 Advancing to Symbol-Level Debugger
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../7-headto-sym-debugger/1-how-go-build-works.html">
            
                <a href="../7-headto-sym-debugger/1-how-go-build-works.html">
            
                    
                    7.1 Go Build Internals
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="../7-headto-sym-debugger/2-elf.html">
            
                <a href="../7-headto-sym-debugger/2-elf.html">
            
                    
                    7.2 Understanding ELF Files
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="../7-headto-sym-debugger/3-syms.html">
            
                <a href="../7-headto-sym-debugger/3-syms.html">
            
                    
                    7.3 Symbols & Symbol Tables
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4" data-path="../7-headto-sym-debugger/4-syms-resolve-reloc.html">
            
                <a href="../7-headto-sym-debugger/4-syms-resolve-reloc.html">
            
                    
                    7.4 Symbol Resolution & Relocation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.5" data-path="../7-headto-sym-debugger/5-loading.html">
            
                <a href="../7-headto-sym-debugger/5-loading.html">
            
                    
                    7.5 Loading
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.6" data-path="../7-headto-sym-debugger/6-gopkg-debug/">
            
                <a href="../7-headto-sym-debugger/6-gopkg-debug/">
            
                    
                    7.6 Go Standard Library debug/*
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.6.1" data-path="../7-headto-sym-debugger/6-gopkg-debug/1-elf.html">
            
                <a href="../7-headto-sym-debugger/6-gopkg-debug/1-elf.html">
            
                    
                    7.6.1 debug/elf
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.6.2" data-path="../7-headto-sym-debugger/6-gopkg-debug/2-gosym.html">
            
                <a href="../7-headto-sym-debugger/6-gopkg-debug/2-gosym.html">
            
                    
                    7.6.2 debug/gosym
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.6.3" data-path="../7-headto-sym-debugger/6-gopkg-debug/3-dwarf.html">
            
                <a href="../7-headto-sym-debugger/6-gopkg-debug/3-dwarf.html">
            
                    
                    7.6.3 debug/dwarf
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7.7" data-path="../7-headto-sym-debugger/7-headto-dwarf/">
            
                <a href="../7-headto-sym-debugger/7-headto-dwarf/">
            
                    
                    7.7 Advancing to DWARF
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.7.1" data-path="../7-headto-sym-debugger/7-headto-dwarf/1-gopkgs-about-dwarf.html">
            
                <a href="../7-headto-sym-debugger/7-headto-dwarf/1-gopkgs-about-dwarf.html">
            
                    
                    7.7.1 Related Go Packages
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.7.2" data-path="../7-headto-sym-debugger/7-headto-dwarf/2-delve-into-internals.html">
            
                <a href="../7-headto-sym-debugger/7-headto-dwarf/2-delve-into-internals.html">
            
                    
                    7.7.2 How to Crack Those Details
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.7.3" data-path="../7-headto-sym-debugger/7-headto-dwarf/3-compiler-gen-dwarfdata.html">
            
                <a href="../7-headto-sym-debugger/7-headto-dwarf/3-compiler-gen-dwarfdata.html">
            
                    
                    7.7.3 Compiler Generated DWARF Data
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.7.4" data-path="../7-headto-sym-debugger/7-headto-dwarf/4-linker-gen-dwarfdata.html">
            
                <a href="../7-headto-sym-debugger/7-headto-dwarf/4-linker-gen-dwarfdata.html">
            
                    
                    7.7.4 Linker Generated DWARF Data
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.7.5" data-path="../7-headto-sym-debugger/7-headto-dwarf/5-headto-dwarf.html">
            
                <a href="../7-headto-sym-debugger/7-headto-dwarf/5-headto-dwarf.html">
            
                    
                    7.7.5 Understanding DWARF
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../8-dwarf/">
            
                <a href="../8-dwarf/">
            
                    
                    8 Debug Information Standard: DWARF
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="../8-dwarf/1-history.html">
            
                <a href="../8-dwarf/1-history.html">
            
                    
                    8.1 DWARF Development History
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="../8-dwarf/2-overview.html">
            
                <a href="../8-dwarf/2-overview.html">
            
                    
                    8.2 DWARF Content Overview
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="../8-dwarf/3-dwarfdata.html">
            
                <a href="../8-dwarf/3-dwarfdata.html">
            
                    
                    8.3 DWARF Data Classification
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4" data-path="../8-dwarf/4-die/">
            
                <a href="../8-dwarf/4-die/">
            
                    
                    8.4 DIE Detailed Introduction
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.4.1" data-path="../8-dwarf/4-die/1-desc-data-type.html">
            
                <a href="../8-dwarf/4-die/1-desc-data-type.html">
            
                    
                    8.4.1 DIE Describing Data and Types
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4.2" data-path="../8-dwarf/4-die/2-desc-locations.html">
            
                <a href="../8-dwarf/4-die/2-desc-locations.html">
            
                    
                    8.4.2 Location Data
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4.3" data-path="../8-dwarf/4-die/3-desc-code.html">
            
                <a href="../8-dwarf/4-die/3-desc-code.html">
            
                    
                    8.4.3 DIE Describing Executable Code
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4.4" data-path="../8-dwarf/4-die/4-encoding.html">
            
                <a href="../8-dwarf/4-die/4-encoding.html">
            
                    
                    8.4.4 DIE Data Encoding
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8.5" data-path="../8-dwarf/5-other/">
            
                <a href="../8-dwarf/5-other/">
            
                    
                    8.5 Other Debug Data
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.5.1" data-path="../8-dwarf/5-other/1-accelerated-access.html">
            
                <a href="../8-dwarf/5-other/1-accelerated-access.html">
            
                    
                    8.5.1 Accelerated Access
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.5.2" data-path="../8-dwarf/5-other/2-lineno-table.html">
            
                <a href="../8-dwarf/5-other/2-lineno-table.html">
            
                    
                    8.5.2 Line Number Table Information
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.5.3" data-path="../8-dwarf/5-other/3-callframe-info.html">
            
                <a href="../8-dwarf/5-other/3-callframe-info.html">
            
                    
                    8.5.3 Call Frame Information
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.5.4" data-path="../8-dwarf/5-other/4-macro-info.html">
            
                <a href="../8-dwarf/5-other/4-macro-info.html">
            
                    
                    8.5.4 Macro Information
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.5.5" data-path="../8-dwarf/5-other/5-varlen-data.html">
            
                <a href="../8-dwarf/5-other/5-varlen-data.html">
            
                    
                    8.5.5 Variable Length Data
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.5.6" data-path="../8-dwarf/5-other/6-shrink-data.html">
            
                <a href="../8-dwarf/5-other/6-shrink-data.html">
            
                    
                    8.5.6 Compressed DWARF Data
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.5.7" data-path="../8-dwarf/5-other/7-elf-sections.html">
            
                <a href="../8-dwarf/5-other/7-elf-sections.html">
            
                    
                    8.5.7 ELF Sections
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8.6" data-path="../8-dwarf/6-practices.html">
            
                <a href="../8-dwarf/6-practices.html">
            
                    
                    8.6 DWARF Parsing and Applications
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.7" data-path="../8-dwarf/7-summary.html">
            
                <a href="../8-dwarf/7-summary.html">
            
                    
                    8.7 Summary
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../9-develop-sym-debugger/">
            
                <a href="../9-develop-sym-debugger/">
            
                    
                    9 Developing Go Symbol-Level Debugger
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="../9-develop-sym-debugger/1-æ¶æè®¾è®¡/">
            
                <a href="../9-develop-sym-debugger/1-æ¶æè®¾è®¡/">
            
                    
                    9.1 Architecture Design
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1.1" data-path="../9-develop-sym-debugger/1-æ¶æè®¾è®¡/1-ç°ä»£è°è¯å¨æ¶æ.html">
            
                <a href="../9-develop-sym-debugger/1-æ¶æè®¾è®¡/1-ç°ä»£è°è¯å¨æ¶æ.html">
            
                    
                    9.1.1 Modern Debugger Architecture
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.1.2" data-path="../9-develop-sym-debugger/1-æ¶æè®¾è®¡/2-åç«¯UIå±è®¾è®¡.html">
            
                <a href="../9-develop-sym-debugger/1-æ¶æè®¾è®¡/2-åç«¯UIå±è®¾è®¡.html">
            
                    
                    9.1.2 Frontend UI Layer Design
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.1.3" data-path="../9-develop-sym-debugger/1-æ¶æè®¾è®¡/3-Serviceå±è®¾è®¡.html">
            
                <a href="../9-develop-sym-debugger/1-æ¶æè®¾è®¡/3-Serviceå±è®¾è®¡.html">
            
                    
                    9.1.3 Service Layer Design
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.1.4" data-path="../9-develop-sym-debugger/1-æ¶æè®¾è®¡/4-åç«¯ç¬¦å·å±è®¾è®¡.html">
            
                <a href="../9-develop-sym-debugger/1-æ¶æè®¾è®¡/4-åç«¯ç¬¦å·å±è®¾è®¡.html">
            
                    
                    9.1.4 Backend Symbol Layer Design
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.1.5" data-path="../9-develop-sym-debugger/1-æ¶æè®¾è®¡/5-åç«¯ç®æ å±è®¾è®¡.html">
            
                <a href="../9-develop-sym-debugger/1-æ¶æè®¾è®¡/5-åç«¯ç®æ å±è®¾è®¡.html">
            
                    
                    9.1.5 Backend Target Layer Design
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.1.6" data-path="../9-develop-sym-debugger/1-æ¶æè®¾è®¡/6-æ¥å¿ç³»ç»è®¾è®¡.html">
            
                <a href="../9-develop-sym-debugger/1-æ¶æè®¾è®¡/6-æ¥å¿ç³»ç»è®¾è®¡.html">
            
                    
                    9.1.6 Logging System Design
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9.2" data-path="../9-develop-sym-debugger/2-æ ¸å¿è°è¯é»è¾/">
            
                <a href="../9-develop-sym-debugger/2-æ ¸å¿è°è¯é»è¾/">
            
                    
                    9.2 Core Debugging Logic
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.2.1" data-path="../9-develop-sym-debugger/2-æ ¸å¿è°è¯é»è¾/00-cmds.html">
            
                <a href="../9-develop-sym-debugger/2-æ ¸å¿è°è¯é»è¾/00-cmds.html">
            
                    
                    9.2.00 Core Debugging Commands
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.2" data-path="../9-develop-sym-debugger/2-æ ¸å¿è°è¯é»è¾/01-debug-session.html">
            
                <a href="../9-develop-sym-debugger/2-æ ¸å¿è°è¯é»è¾/01-debug-session.html">
            
                    
                    9.2.01 Opening Debug Session
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.3" data-path="../9-develop-sym-debugger/2-æ ¸å¿è°è¯é»è¾/11-tinydbg_attach.html">
            
                <a href="../9-develop-sym-debugger/2-æ ¸å¿è°è¯é»è¾/11-tinydbg_attach.html">
            
                    
                    9.2.11 tinydbg attach
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.4" data-path="../9-develop-sym-debugger/2-æ ¸å¿è°è¯é»è¾/12-tinydbg_attach_waitfor.html">
            
                <a href="../9-develop-sym-debugger/2-æ ¸å¿è°è¯é»è¾/12-tinydbg_attach_waitfor.html">
            
                    
                    9.2.12 tinydbg attach+waitfor
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.5" data-path="../9-develop-sym-debugger/2-æ ¸å¿è°è¯é»è¾/13-tinydbg_exec.html">
            
                <a href="../9-develop-sym-debugger/2-æ ¸å¿è°è¯é»è¾/13-tinydbg_exec.html">
            
                    
                    9.2.13 tinydbg exec
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.6" data-path="../9-develop-sym-debugger/2-æ ¸å¿è°è¯é»è¾/14-tinydbg_debug.html">
            
                <a href="../9-develop-sym-debugger/2-æ ¸å¿è°è¯é»è¾/14-tinydbg_debug.html">
            
                    
                    9.2.14 tinydbg debug
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.7" data-path="../9-develop-sym-debugger/2-æ ¸å¿è°è¯é»è¾/15-tinydbg_core1.html">
            
                <a href="../9-develop-sym-debugger/2-æ ¸å¿è°è¯é»è¾/15-tinydbg_core1.html">
            
                    
                    9.2.15 tinydbg core - part1
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.8" data-path="../9-develop-sym-debugger/2-æ ¸å¿è°è¯é»è¾/15-tinydbg_core2.html">
            
                <a href="../9-develop-sym-debugger/2-æ ¸å¿è°è¯é»è¾/15-tinydbg_core2.html">
            
                    
                    9.2.15 tinydbg core - part2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.9" data-path="../9-develop-sym-debugger/2-æ ¸å¿è°è¯é»è¾/16-tinydbg_connect.html">
            
                <a href="../9-develop-sym-debugger/2-æ ¸å¿è°è¯é»è¾/16-tinydbg_connect.html">
            
                    
                    9.2.16 tinydbg connect
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.10" data-path="../9-develop-sym-debugger/2-æ ¸å¿è°è¯é»è¾/17-tinydbg_trace.html">
            
                <a href="../9-develop-sym-debugger/2-æ ¸å¿è°è¯é»è¾/17-tinydbg_trace.html">
            
                    
                    9.2.17 tinydbg trace
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.11" data-path="../9-develop-sym-debugger/2-æ ¸å¿è°è¯é»è¾/21-disassemble.html">
            
                <a href="../9-develop-sym-debugger/2-æ ¸å¿è°è¯é»è¾/21-disassemble.html">
            
                    
                    9.2.21 tinydbg> disass
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.12" data-path="../9-develop-sym-debugger/2-æ ¸å¿è°è¯é»è¾/22-breakpoint.html">
            
                <a href="../9-develop-sym-debugger/2-æ ¸å¿è°è¯é»è¾/22-breakpoint.html">
            
                    
                    9.2.22 tinydbg> breakpoint
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.13" data-path="../9-develop-sym-debugger/2-æ ¸å¿è°è¯é»è¾/23-breakpoints.html">
            
                <a href="../9-develop-sym-debugger/2-æ ¸å¿è°è¯é»è¾/23-breakpoints.html">
            
                    
                    9.2.23 tinydbg> breakpoints
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.14" data-path="../9-develop-sym-debugger/2-æ ¸å¿è°è¯é»è¾/24-clear.html">
            
                <a href="../9-develop-sym-debugger/2-æ ¸å¿è°è¯é»è¾/24-clear.html">
            
                    
                    9.2.24 tinydbg> clear | toggle
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.15" data-path="../9-develop-sym-debugger/2-æ ¸å¿è°è¯é»è¾/25-clearall.html">
            
                <a href="../9-develop-sym-debugger/2-æ ¸å¿è°è¯é»è¾/25-clearall.html">
            
                    
                    9.2.25 tinydbg> clearall
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.16" data-path="../9-develop-sym-debugger/2-æ ¸å¿è°è¯é»è¾/26-step.html">
            
                <a href="../9-develop-sym-debugger/2-æ ¸å¿è°è¯é»è¾/26-step.html">
            
                    
                    9.2.26 tinydbg> next | step | stepi
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.17" data-path="../9-develop-sym-debugger/2-æ ¸å¿è°è¯é»è¾/27-continue.html">
            
                <a href="../9-develop-sym-debugger/2-æ ¸å¿è°è¯é»è¾/27-continue.html">
            
                    
                    9.2.27 Continue Execution
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.18" data-path="../9-develop-sym-debugger/2-æ ¸å¿è°è¯é»è¾/28-pmem.html">
            
                <a href="../9-develop-sym-debugger/2-æ ¸å¿è°è¯é»è¾/28-pmem.html">
            
                    
                    9.2.28 View Memory
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.19" data-path="../9-develop-sym-debugger/2-æ ¸å¿è°è¯é»è¾/29-regs.html">
            
                <a href="../9-develop-sym-debugger/2-æ ¸å¿è°è¯é»è¾/29-regs.html">
            
                    
                    9.2.29 View Registers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.20" data-path="../9-develop-sym-debugger/2-æ ¸å¿è°è¯é»è¾/30-call-frame.html">
            
                <a href="../9-develop-sym-debugger/2-æ ¸å¿è°è¯é»è¾/30-call-frame.html">
            
                    
                    9.2.30 Call Frame Information
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.21" data-path="../9-develop-sym-debugger/2-æ ¸å¿è°è¯é»è¾/31-vars.html">
            
                <a href="../9-develop-sym-debugger/2-æ ¸å¿è°è¯é»è¾/31-vars.html">
            
                    
                    9.2.31 Variables & Type System
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.22" data-path="../9-develop-sym-debugger/2-æ ¸å¿è°è¯é»è¾/32-how_listfunctions_work.html">
            
                <a href="../9-develop-sym-debugger/2-æ ¸å¿è°è¯é»è¾/32-how_listfunctions_work.html">
            
                    
                    9.2.32 how ListFunctions work
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.23" data-path="../9-develop-sym-debugger/2-æ ¸å¿è°è¯é»è¾/32-funcs.html">
            
                <a href="../9-develop-sym-debugger/2-æ ¸å¿è°è¯é»è¾/32-funcs.html">
            
                    
                    9.2.32 funcs
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.24" data-path="../9-develop-sym-debugger/2-æ ¸å¿è°è¯é»è¾/33-goroutines.html">
            
                <a href="../9-develop-sym-debugger/2-æ ¸å¿è°è¯é»è¾/33-goroutines.html">
            
                    
                    9.2.33 Goroutines
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.25" data-path="../9-develop-sym-debugger/2-æ ¸å¿è°è¯é»è¾/34-multi-threads.html">
            
                <a href="../9-develop-sym-debugger/2-æ ¸å¿è°è¯é»è¾/34-multi-threads.html">
            
                    
                    9.2.34 Tracing Multi-threaded Programs
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9.3" data-path="../9-develop-sym-debugger/3-é«çº§åè½æ©å±/">
            
                <a href="../9-develop-sym-debugger/3-é«çº§åè½æ©å±/">
            
                    
                    9.3 Advanced Feature Extensions
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.3.1" data-path="../9-develop-sym-debugger/3-é«çº§åè½æ©å±/100-howto_integrate_starlark.html">
            
                <a href="../9-develop-sym-debugger/3-é«çº§åè½æ©å±/100-howto_integrate_starlark.html">
            
                    
                    9.3.100 Integrating starlark
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3.2" data-path="../9-develop-sym-debugger/3-é«çº§åè½æ©å±/101-howto_tracing_via_ebpf.html">
            
                <a href="../9-develop-sym-debugger/3-é«çº§åè½æ©å±/101-howto_tracing_via_ebpf.html">
            
                    
                    9.3.101 Tracing with eBPF
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3.3" data-path="../9-develop-sym-debugger/3-é«çº§åè½æ©å±/102-howto_syntax_highlight.html">
            
                <a href="../9-develop-sym-debugger/3-é«çº§åè½æ©å±/102-howto_syntax_highlight.html">
            
                    
                    9.3.102 Implementing Syntax Highlighting
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3.4" data-path="../9-develop-sym-debugger/3-é«çº§åè½æ©å±/103-howto_paging_output.html">
            
                <a href="../9-develop-sym-debugger/3-é«çº§åè½æ©å±/103-howto_paging_output.html">
            
                    
                    9.3.103 Implementing Paged Output
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3.5" data-path="../9-develop-sym-debugger/3-é«çº§åè½æ©å±/104-howto_read_separate_dwarfdata.html">
            
                <a href="../9-develop-sym-debugger/3-é«çº§åè½æ©å±/104-howto_read_separate_dwarfdata.html">
            
                    
                    9.3.104 Reading Separately Stored DWARF Data
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3.6" data-path="../9-develop-sym-debugger/3-é«çº§åè½æ©å±/105-howto_guess_substitutepath.html">
            
                <a href="../9-develop-sym-debugger/3-é«çº§åè½æ©å±/105-howto_guess_substitutepath.html">
            
                    
                    9.3.105 Automatic Source File Path Mapping
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3.7" data-path="../9-develop-sym-debugger/3-é«çº§åè½æ©å±/106-howto_redirect_target_io.html">
            
                <a href="../9-develop-sym-debugger/3-é«çº§åè½æ©å±/106-howto_redirect_target_io.html">
            
                    
                    9.3.106 Implementing Target Process IO Redirection
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3.8" data-path="../9-develop-sym-debugger/3-é«çº§åè½æ©å±/107-howto_customize_tinydbg.html">
            
                <a href="../9-develop-sym-debugger/3-é«çº§åè½æ©å±/107-howto_customize_tinydbg.html">
            
                    
                    9.3.107 Supporting User Preferences
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3.9" data-path="../9-develop-sym-debugger/3-é«çº§åè½æ©å±/108-howto_accept_multiclient.html">
            
                <a href="../9-develop-sym-debugger/3-é«çº§åè½æ©å±/108-howto_accept_multiclient.html">
            
                    
                    9.3.108 Supporting Multi-client Debug Mode
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3.10" data-path="../9-develop-sym-debugger/3-é«çº§åè½æ©å±/109-howto_transcript_debugging.html">
            
                <a href="../9-develop-sym-debugger/3-é«çº§åè½æ©å±/109-howto_transcript_debugging.html">
            
                    
                    9.3.109 Supporting Debug Activity Logging
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../10-extras/">
            
                <a href="../10-extras/">
            
                    
                    10 Mainstream Debugging Technology Analysis
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="../10-extras/1-development-of-debugger.html">
            
                <a href="../10-extras/1-development-of-debugger.html">
            
                    
                    10.1 Debugger Development History
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="../10-extras/2-development-of-logging.html">
            
                <a href="../10-extras/2-development-of-logging.html">
            
                    
                    10.2 Logging System Development History
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.3" data-path="../10-extras/3-development-of-metrics.html">
            
                <a href="../10-extras/3-development-of-metrics.html">
            
                    
                    10.3 Metrics System Development History
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.4" data-path="../10-extras/4-development-of-tracing.html">
            
                <a href="../10-extras/4-development-of-tracing.html">
            
                    
                    10.4 Tracing System Development History
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.5" data-path="../10-extras/5-development-of-bisect.html">
            
                <a href="../10-extras/5-development-of-bisect.html">
            
                    
                    10.5 Bisect Development History
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.6" data-path="../10-extras/6-development-of-ebpf.html">
            
                <a href="../10-extras/6-development-of-ebpf.html">
            
                    
                    10.6 eBPF Development History
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.7" data-path="../10-extras/7-development-of-replay.html">
            
                <a href="../10-extras/7-development-of-replay.html">
            
                    
                    10.7 Record and Replay Development History
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.8" data-path="../10-extras/8-development-of-debug-dsys.html">
            
                <a href="../10-extras/8-development-of-debug-dsys.html">
            
                    
                    10.8 Distributed Debugging Development History
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="../11-thanks/">
            
                <a href="../11-thanks/">
            
                    
                    11 Acknowledgments
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="../12-appendix/">
            
                <a href="../12-appendix/">
            
                    
                    12 Appendix
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.1" data-path="../12-appendix/1-go-programme-start.html">
            
                <a href="../12-appendix/1-go-programme-start.html">
            
                    
                    12.1 Go Program Startup Process
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.2" data-path="../12-appendix/2-auto-trace-cloned-threads.html">
            
                <a href="../12-appendix/2-auto-trace-cloned-threads.html">
            
                    
                    12.2 Automatic Thread Tracing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.3" data-path="../12-appendix/3-git-bisect.html">
            
                <a href="../12-appendix/3-git-bisect.html">
            
                    
                    12.3 git bisect
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.4" data-path="../12-appendix/80-go-tool-compile.html">
            
                <a href="../12-appendix/80-go-tool-compile.html">
            
                    
                    12.10 Compilation Toolchain/compile
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.5" data-path="../12-appendix/81-go-tool-asm.html">
            
                <a href="../12-appendix/81-go-tool-asm.html">
            
                    
                    12.11 Compilation Toolchain/asm
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.6" data-path="../12-appendix/82-go-tool-link.html">
            
                <a href="../12-appendix/82-go-tool-link.html">
            
                    
                    12.12 Compilation Toolchain/link
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.7" data-path="../12-appendix/90-why-buildid-loaded.html">
            
                <a href="../12-appendix/90-why-buildid-loaded.html">
            
                    
                    12.13 More: GNU build-id+gobuildid
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.8" data-path="../12-appendix/91-syntax-and-semantic-analysis.html">
            
                <a href="../12-appendix/91-syntax-and-semantic-analysis.html">
            
                    
                    12.14 More: Syntax Analysis vs Semantic Analysis
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.9" data-path="../12-appendix/92-why-gdb-uses-symtab.html">
            
                <a href="../12-appendix/92-why-gdb-uses-symtab.html">
            
                    
                    12.15 More: Why GDB Uses Symbol Table+DWARF
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >6.20 Tracing Multi-threaded Programs 1</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h2 id="extended-reading-how-to-track-newly-created-threads">Extended Reading: How to Track Newly Created Threads</h2>
<h3 id="implementation-goal">Implementation Goal</h3>
<p>In previous demonstrations of debugger operations, we used single-threaded programs to simplify the challenges of multi-threaded debugging. However, in real-world scenarios, our programs are often multi-threaded.</p>
<p>Our debugger must have the capability to debug multi-threaded programs. Here are some scenarios that need special emphasis:</p>
<ul>
<li>Parent-child processes: In the implementation of the debugger, tracking parent-child processes and tracking threads within a process are technically similar.
Since this book is focused on Go debugging, we will only focus on multi-threaded debugging. Multi-process debugging will be mentioned but not covered in a dedicated section.</li>
<li>Thread creation timing: Threads may be created before we attach or after we attach, through the <code>clone</code> system call.<ul>
<li>For threads already created by the process, we need the ability to enumerate and initiate tracking, and switch between different threads for tracking.</li>
<li>For threads created during the debugging process, we need the ability to immediately sense thread creation and prompt the user to choose which thread to track, facilitating observation of events of interest.</li>
</ul>
</li>
</ul>
<p>In this section, we will first look at how to track newly created threads and obtain the new thread&apos;s TID to initiate tracking. In the next section, we will explore how to enumerate already created threads and selectively track specified threads.</p>
<h3 id="basic-knowledge">Basic Knowledge</h3>
<p>Creating a new thread (or a new goroutine) is done through the <code>clone</code> system call. Here&apos;s how it works:</p>
<pre><code class="lang-go"><span class="hljs-comment">// Clone parameters for creating a thread</span>
<span class="hljs-keyword">const</span> (
    cloneFlags = _CLONE_VM | <span class="hljs-comment">/* share memory */</span>
        _CLONE_FS | <span class="hljs-comment">/* share cwd, etc */</span>
        _CLONE_FILES | <span class="hljs-comment">/* share fd table */</span>
        _CLONE_SIGHAND | <span class="hljs-comment">/* share sig handler table */</span>
        _CLONE_SYSVSEM | <span class="hljs-comment">/* share SysV semaphore undo lists (see issue #20763) */</span>
        _CLONE_THREAD <span class="hljs-comment">/* revisit - okay for now */</span>
)

<span class="hljs-comment">// Create a new thread</span>
<span class="hljs-keyword">func</span> newosproc(mp *m) {
    stk := unsafe.Pointer(mp.g0.stack.hi)
    <span class="hljs-comment">/*
     * note: strace gets confused if we use CLONE_PTRACE here.
     */</span>
    <span class="hljs-keyword">if</span> <span class="hljs-literal">false</span> {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;newosproc stk=&quot;</span>, stk, <span class="hljs-string">&quot; m=&quot;</span>, mp, <span class="hljs-string">&quot; g=&quot;</span>, mp.g0, <span class="hljs-string">&quot; clone=&quot;</span>, abi.FuncPCABI0(clone), <span class="hljs-string">&quot; id=&quot;</span>, mp.id, <span class="hljs-string">&quot; ostk=&quot;</span>, &amp;mp, <span class="hljs-string">&quot;\n&quot;</span>)
    }

    <span class="hljs-comment">// Disable signals during clone, so that the new thread starts</span>
    <span class="hljs-comment">// with signals disabled. It will enable them in minit.</span>
    <span class="hljs-keyword">var</span> oset sigset
    sigprocmask(_SIG_SETMASK, &amp;sigset_all, &amp;oset)
    ret := clone(cloneFlags, stk, unsafe.Pointer(mp), unsafe.Pointer(mp.g0), unsafe.Pointer(abi.FuncPCABI0(mstart)))
    sigprocmask(_SIG_SETMASK, &amp;oset, <span class="hljs-literal">nil</span>)

    <span class="hljs-keyword">if</span> ret &lt; <span class="hljs-number">0</span> {
        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;runtime: failed to create new OS thread (have &quot;</span>, mcount(), <span class="hljs-string">&quot; already; errno=&quot;</span>, -ret, <span class="hljs-string">&quot;)\n&quot;</span>)
        <span class="hljs-keyword">if</span> ret == -_EAGAIN {
            <span class="hljs-built_in">println</span>(<span class="hljs-string">&quot;runtime: may need to increase max user processes (ulimit -u)&quot;</span>)
        }
        throw(<span class="hljs-string">&quot;newosproc&quot;</span>)
    }
}

<span class="hljs-comment">//go:noescape</span>
<span class="hljs-keyword">func</span> clone(flags <span class="hljs-keyword">int32</span>, stk, mp, gp, fn unsafe.Pointer) <span class="hljs-keyword">int32</span>
</code></pre>
<p>The implementation of the <code>clone</code> function in the amd64 architecture is as follows, see <code>go/src/runtime/sys_linux_amd64.s</code>:</p>
<pre><code class="lang-go"><span class="hljs-comment">// int32 clone(int32 flags, void *stk, M *mp, G *gp, void (*fn)(void));</span>
TEXT runtime&#xB7;clone(SB),NOSPLIT,$<span class="hljs-number">0</span>
    MOVL    flags+<span class="hljs-number">0</span>(FP), DI     <span class="hljs-comment">// Prepare system call parameters</span>
    MOVQ    stk+<span class="hljs-number">8</span>(FP), SI
    ...

    <span class="hljs-comment">// Copy mp, gp, fn off parent stack for use by child.</span>
    <span class="hljs-comment">// Careful: Linux system call clobbers CX and R11.</span>
    MOVQ    mp+<span class="hljs-number">16</span>(FP), R13
    MOVQ    gp+<span class="hljs-number">24</span>(FP), R9
    MOVQ    fn+<span class="hljs-number">32</span>(FP), R12
    ...

    MOVL    $SYS_clone, AX         <span class="hljs-comment">// Clone system call number</span>
    syscall                <span class="hljs-comment">// Execute system call</span>

    <span class="hljs-comment">// In parent, return.</span>
    CMPQ    AX, $<span class="hljs-number">0</span>
    JEQ    <span class="hljs-number">3</span>(PC)
    MOVL    AX, ret+<span class="hljs-number">40</span>(FP)        <span class="hljs-comment">// Parent process, return the TID of the new thread</span>
    RET

    <span class="hljs-comment">// In child, on new stack.</span>
    MOVQ    SI, SP

    <span class="hljs-comment">// If g or m are nil, skip Go-related setup.</span>
    CMPQ    R13, $<span class="hljs-number">0</span>    <span class="hljs-comment">// m</span>
    JEQ    nog2
    CMPQ    R9, $<span class="hljs-number">0</span>    <span class="hljs-comment">// g</span>
    JEQ    nog2

    <span class="hljs-comment">// Initialize m-&gt;procid to Linux tid</span>
    MOVL    $SYS_gettid, AX
    SYSCALL
    MOVQ    AX, m_procid(R13)

    <span class="hljs-comment">// In child, set up new stack</span>
    get_tls(CX)
    MOVQ    R13, g_m(R9)
    MOVQ    R9, g(CX)
    MOVQ    R9, R14 <span class="hljs-comment">// set g register</span>
    CALL    runtime&#xB7;stackcheck(SB)

nog2:
    <span class="hljs-comment">// Call fn. This is the PC of an ABI0 function.</span>
    CALL    R12            <span class="hljs-comment">// New thread, initialize related GMP scheduling, start executing the thread function mstart,</span>
                    <span class="hljs-comment">// clone parameter includes abi.FuncPCABI0(mstart)</span>
    ...
</code></pre>
<p>From this, we can see that as long as the tracee executes the <code>clone</code> system call, the kernel can notify us, for example, through <code>ptrace(PTRACE_SYSCALL, pid, ...)</code>. This way, when the tracee executes the <code>clone</code> system call, it will stop at the enter and exit points of the system call, allowing us to perform debugging tasks. We can read the value of the RAX register to determine if the current system call number is <code>__NR_clone</code>. If it is, it indicates that the <code>clone</code> system call was executed, and we can use this to determine that a new thread was created. Similarly, at the exit of the system call, we can use a similar method to obtain the TID information of the new thread.</p>
<p>This method allows us to sense that the tracee has created a new thread. However, this method <code>ptrace(PTRACE_SYSCALL, pid, ...)</code> is too general, and you need to understand the ABI calling conventions (such as register allocation for system call numbers and return values), making it less convenient to use.</p>
<p>There is another method: when executing <code>ptrace(PTRACE_ATTACH, pid, ...)</code>, pass the option <code>PTRACE_O_TRACECLONE</code>. This operation is specifically set for tracking the <code>clone</code> system call, and afterward, you can:</p>
<ol>
<li><p><strong>Tracer</strong>: Run <code>ptrace(PTRACE_ATTACH, pid, NULL, PTRACE_O_TRACECLONE)</code>
This operation will cause the kernel to send a SIGTRAP signal to the tracer when the tracee executes the <code>clone</code> system call, notifying that a new thread or process has been created.</p>
</li>
<li><p><strong>Tracer</strong>: Actively sense the occurrence of this event through two methods:</p>
<ul>
<li>Through a signal handler to sense the occurrence of this signal;</li>
<li>Through <code>waitpid()</code> to sense that the tracee&apos;s running state has changed, and determine if it is a PTRACE_EVENT_CLONE event through the status returned by <code>waitpid</code>.
See: <code>man 2 ptrace</code> for details on the option <code>PTRACE_O_TRACECLONE</code>.</li>
</ul>
</li>
<li><p><strong>Tracer</strong>: If it is confirmed that it is due to <code>clone</code>, you can further obtain the new thread&apos;s PID information through <code>newpid = ptrace(PTRACE_GETEVENTMSG, pid, ...)</code>.</p>
</li>
<li><p>After obtaining the thread PID, you can proceed to do other things, such as automatically tracking the new thread by default, or choosing to release the new thread or observe and control it.</p>
</li>
</ol>
<blockquote>
<p>Note: Occasionally, the terms PID and TID may be mixed. For threads, it is essentially a lightweight process (LWP) created by <code>clone</code>. However, when describing a thread&apos;s ID, the term TID should be used, not PID. Due to certain function call parameters, I may occasionally write them the same, such as when attaching a thread, the parameter should be TID, not the thread&apos;s PID, as their values are different.</p>
<ul>
<li>The PID of the process to which this thread belongs can be obtained with <code>getpid()</code>.</li>
<li>The TID of this thread (or described as the corresponding LWP&apos;s PID) can be obtained with <code>syscall(SYS_gettid)</code>.</li>
</ul>
</blockquote>
<p>The second method is easier to understand and maintain, and we will adopt it in our design and implementation. However, the first method also has potential, such as tracking arbitrary system calls during debugging, which we can implement using a similar approach. In the extended reading section, we will also introduce this further in a dedicated section.</p>
<h3 id="design-implementation">Design Implementation</h3>
<p>The implementation code for this part can be found in <a href="https://github.com/hitzhangjie/golang-debugger-lessons" target="_blank">hitzhangjie/golang-debugger-lessons</a> / 20_trace_new_threads.</p>
<p>First, for convenience in later testing, we will implement a multi-threaded program in C. The program logic is simple: it creates a new thread every few seconds, and the thread function prints the current thread&apos;s PID and the LWP&apos;s PID.</p>
<pre><code class="lang-c"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdlib.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;unistd.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;sys/syscall.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;pthread.h&gt;</span></span>

<span class="hljs-keyword">pid_t</span> gettid(<span class="hljs-keyword">void</span>);

<span class="hljs-function"><span class="hljs-keyword">void</span> *<span class="hljs-title">threadfunc</span><span class="hljs-params">(<span class="hljs-keyword">void</span> *arg)</span> </span>{
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;process: %d, thread: %u\n&quot;</span>, getpid(), syscall(SYS_gettid));
    sleep(<span class="hljs-number">1</span>);
}

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;process: %d, thread: %u\n&quot;</span>, getpid(), syscall(SYS_gettid));

    <span class="hljs-keyword">pthread_t</span> tid;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++)
    {
        <span class="hljs-keyword">if</span> (i % <span class="hljs-number">10</span> == <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">int</span> ret = pthread_create(&amp;tid, <span class="hljs-literal">NULL</span>, threadfunc, <span class="hljs-literal">NULL</span>);
            <span class="hljs-keyword">if</span> (ret != <span class="hljs-number">0</span>) {
                <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;pthread_create error: %d\n&quot;</span>, ret);
                <span class="hljs-built_in">exit</span>(<span class="hljs-number">-1</span>);
            }
        }
        sleep(<span class="hljs-number">1</span>);
    }
    sleep(<span class="hljs-number">15</span>);
}
</code></pre>
<p>This program can be compiled with <code>gcc -o fork fork.c -lpthread</code>, and then run <code>./fork</code> for testing to see the running effect without debugging and tracking.</p>
<p>Next, let&apos;s look at the debugger&apos;s code logic. This is mainly to demonstrate how the tracer (debugger) can sense newly created threads in a multi-threaded program and automatically track them, and if necessary, implement a debugging effect similar to gdb&apos;s <code>set follow-fork-mode=child/parent/ask</code>.</p>
<pre><code class="lang-go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">&quot;fmt&quot;</span>
    <span class="hljs-string">&quot;os&quot;</span>
    <span class="hljs-string">&quot;os/exec&quot;</span>
    <span class="hljs-string">&quot;runtime&quot;</span>
    <span class="hljs-string">&quot;strconv&quot;</span>
    <span class="hljs-string">&quot;syscall&quot;</span>
    <span class="hljs-string">&quot;time&quot;</span>
)

<span class="hljs-keyword">var</span> usage = <span class="hljs-string">`Usage:
    go run main.go &lt;pid&gt;

    args:
    - pid: specify the pid of process to attach
`</span>

<span class="hljs-keyword">func</span> main() {
    runtime.LockOSThread()

    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(os.Args) != <span class="hljs-number">2</span> {
        fmt.Println(usage)
        os.Exit(<span class="hljs-number">1</span>)
    }

    <span class="hljs-comment">// pid</span>
    pid, err := strconv.Atoi(os.Args[<span class="hljs-number">1</span>])
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        <span class="hljs-built_in">panic</span>(err)
    }

    <span class="hljs-keyword">if</span> !checkPid(<span class="hljs-keyword">int</span>(pid)) {
        fmt.Fprintf(os.Stderr, <span class="hljs-string">&quot;process %d not existed\n\n&quot;</span>, pid)
        os.Exit(<span class="hljs-number">1</span>)
    }

    <span class="hljs-comment">// step1: supposing running dlv attach here</span>
    fmt.Fprintf(os.Stdout, <span class="hljs-string">&quot;===step1===: supposing running `dlv attach pid` here\n&quot;</span>)

    <span class="hljs-comment">// attach</span>
    err = syscall.PtraceAttach(<span class="hljs-keyword">int</span>(pid))
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        fmt.Fprintf(os.Stderr, <span class="hljs-string">&quot;process %d attach error: %v\n\n&quot;</span>, pid, err)
        os.Exit(<span class="hljs-number">1</span>)
    }
    fmt.Fprintf(os.Stdout, <span class="hljs-string">&quot;process %d attach succ\n\n&quot;</span>, pid)

    <span class="hljs-comment">// check target process stopped or not</span>
    <span class="hljs-keyword">var</span> status syscall.WaitStatus
    <span class="hljs-keyword">var</span> rusage syscall.Rusage
    _, err = syscall.Wait4(<span class="hljs-keyword">int</span>(pid), &amp;status, <span class="hljs-number">0</span>, &amp;rusage)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        fmt.Fprintf(os.Stderr, <span class="hljs-string">&quot;process %d wait error: %v\n\n&quot;</span>, pid, err)
        os.Exit(<span class="hljs-number">1</span>)
    }
    <span class="hljs-keyword">if</span> !status.Stopped() {
        fmt.Fprintf(os.Stderr, <span class="hljs-string">&quot;process %d not stopped\n\n&quot;</span>, pid)
        os.Exit(<span class="hljs-number">1</span>)
    }
    fmt.Fprintf(os.Stdout, <span class="hljs-string">&quot;process %d stopped\n\n&quot;</span>, pid)

    regs := syscall.PtraceRegs{}
    <span class="hljs-keyword">if</span> err := syscall.PtraceGetRegs(<span class="hljs-keyword">int</span>(pid), &amp;regs); err != <span class="hljs-literal">nil</span> {
        fmt.Fprintf(os.Stderr, <span class="hljs-string">&quot;get regs fail: %v\n&quot;</span>, err)
        os.Exit(<span class="hljs-number">1</span>)
    }
    fmt.Fprintf(os.Stdout, <span class="hljs-string">&quot;tracee stopped at %0x\n&quot;</span>, regs.PC())

    <span class="hljs-comment">// step2: setup to trace all new threads creation events</span>
    time.Sleep(time.Second * <span class="hljs-number">2</span>)

    opts := syscall.PTRACE_O_TRACEFORK | syscall.PTRACE_O_TRACEVFORK | syscall.PTRACE_O_TRACECLONE
    <span class="hljs-keyword">if</span> err := syscall.PtraceSetOptions(<span class="hljs-keyword">int</span>(pid), opts); err != <span class="hljs-literal">nil</span> {
        fmt.Fprintf(os.Stderr, <span class="hljs-string">&quot;set options fail: %v\n&quot;</span>, err)
        os.Exit(<span class="hljs-number">1</span>)
    }

    <span class="hljs-keyword">for</span> {
        <span class="hljs-comment">// Release the main thread, as it will stop every time it hits clone</span>
        <span class="hljs-keyword">if</span> err := syscall.PtraceCont(<span class="hljs-keyword">int</span>(pid), <span class="hljs-number">0</span>); err != <span class="hljs-literal">nil</span> {
            fmt.Fprintf(os.Stderr, <span class="hljs-string">&quot;cont fail: %v\n&quot;</span>, err)
            os.Exit(<span class="hljs-number">1</span>)
        }

        <span class="hljs-comment">// Check the main thread&apos;s status, and if the status is a clone event, continue to obtain the LWP PID of the cloned thread</span>
        <span class="hljs-keyword">var</span> status syscall.WaitStatus
        rusage := syscall.Rusage{}
        _, err := syscall.Wait4(pid, &amp;status, syscall.WSTOPPED|syscall.WCLONE, &amp;rusage)
        <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
            fmt.Fprintf(os.Stderr, <span class="hljs-string">&quot;wait4 fail: %v\n&quot;</span>, err)
            <span class="hljs-keyword">break</span>
        }
        <span class="hljs-comment">// Check if the status information is a clone event (see `man 2 ptrace` for details on the option PTRACE_O_TRACECLONE)</span>
        isclone := status&gt;&gt;<span class="hljs-number">8</span> == (syscall.WaitStatus(syscall.SIGTRAP) | syscall.WaitStatus(syscall.PTRACE_EVENT_CLONE&lt;&lt;<span class="hljs-number">8</span>))
        fmt.Fprintf(os.Stdout, <span class="hljs-string">&quot;tracee stopped, tracee pid:%d, status: %s, trapcause is clone: %v\n&quot;</span>,
            pid,
            status.StopSignal().String(),
            isclone)

        <span class="hljs-comment">// Obtain the LWP PID of the child thread</span>
        msg, err := syscall.PtraceGetEventMsg(<span class="hljs-keyword">int</span>(pid))
        <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
            fmt.Fprintf(os.Stderr, <span class="hljs-string">&quot;get event msg fail: %v\n&quot;</span>, err)
            <span class="hljs-keyword">break</span>
        }
        fmt.Fprintf(os.Stdout, <span class="hljs-string">&quot;eventmsg: new thread lwp pid: %d\n&quot;</span>, msg)

        <span class="hljs-comment">// Release the child thread to continue execution</span>
        _ = syscall.PtraceDetach(<span class="hljs-keyword">int</span>(msg))

        time.Sleep(time.Second * <span class="hljs-number">2</span>)
    }
}

<span class="hljs-comment">// checkPid check whether pid is valid process&apos;s id</span>
<span class="hljs-comment">//</span>
<span class="hljs-comment">// On Unix systems, os.FindProcess always succeeds and returns a Process for</span>
<span class="hljs-comment">// the given pid, regardless of whether the process exists.</span>
<span class="hljs-keyword">func</span> checkPid(pid <span class="hljs-keyword">int</span>) <span class="hljs-keyword">bool</span> {
    out, err := exec.Command(<span class="hljs-string">&quot;kill&quot;</span>, <span class="hljs-string">&quot;-s&quot;</span>, <span class="hljs-string">&quot;0&quot;</span>, strconv.Itoa(pid)).CombinedOutput()
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        <span class="hljs-built_in">panic</span>(err)
    }

    <span class="hljs-comment">// output error message, means pid is invalid</span>
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">string</span>(out) != <span class="hljs-string">&quot;&quot;</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
    }

    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
}
</code></pre>
<h3 id="code-testing">Code Testing</h3>
<ol>
<li>First, let&apos;s look at <code>testdata/fork.c</code>. This program creates a pthread thread every few seconds.</li>
</ol>
<p>The main thread and other threads will print the PID and TID (where TID is the corresponding LWP&apos;s PID) of the thread.</p>
<pre><code>zhangjie&#x1F980; testdata(master) $ ./fork 
process: 35573, thread: 35573
process: 35573, thread: 35574
process: 35573, thread: 35716
process: 35573, thread: 35853
process: 35573, thread: 35944
process: 35573, thread: 36086
process: 35573, thread: 36192
process: 35573, thread: 36295
process: 35573, thread: 36398
...
</code></pre><ol>
<li>We will simultaneously observe the execution of <code>./20_trace_new_threads &lt;fork program process pid&gt;</code>.</li>
</ol>
<pre><code>zhangjie&#x1F980; 20_trace_new_threads(master) $ ./20_trace_new_threads 35573
===step1===: supposing running `dlv attach pid` here
process 35573 attach succ

process 35573 stopped

tracee stopped at 7f318346f098
tracee stopped, tracee pid:35573, status: trace/breakpoint trap, trapcause is clone: true
eventmsg: new thread lwp pid: 35716
tracee stopped, tracee pid:35573, status: trace/breakpoint trap, trapcause is clone: true
eventmsg: new thread lwp pid: 35853
tracee stopped, tracee pid:35573, status: trace/breakpoint trap, trapcause is clone: true
eventmsg: new thread lwp pid: 35944
tracee stopped, tracee pid:35573, status: trace/breakpoint trap, trapcause is clone: true
eventmsg: new thread lwp pid: 35944
tracee stopped, tracee pid:35573, status: trace/breakpoint trap, trapcause is clone: true
eventmsg: new thread lwp pid: 35944
tracee stopped, tracee pid:35573, status: trace/breakpoint trap1, trapcause is clone: true
eventmsg: new thread lwp pid: 36086
tracee stopped, tracee pid:35573, status: trace/breakpoint trap, trapcause is clone: true
eventmsg: new thread lwp pid: 36192
tracee stopped, tracee pid:35573, status: trace/breakpoint trap, trapcause is clone: true
eventmsg: new thread lwp pid: 36295
tracee stopped, tracee pid:35573, status: trace/breakpoint trap, trapcause is clone: true
eventmsg: new thread lwp pid: 36398
..
</code></pre><ol>
<li><code>20_trace_new_threads</code> prints an event message: <code>&lt;new thread LWP pid&gt;</code> every few seconds.</li>
</ol>
<p>The conclusion is that by explicitly setting <code>PtraceSetOptions(pid, syscall.PTRACE_O_TRACECLONE)</code>, we can resume the tracee&apos;s execution. When the tracee executes the <code>clone</code> system call, it will trigger a TRAP, and the kernel will send a SIGTRAP to notify the tracer of the tracee&apos;s running state change. The tracer can then check the corresponding status data to determine if it is a clone event.</p>
<p>If it is a clone event, we can further obtain the LWP PID of the newly cloned thread through <code>syscall.PtraceGetEventMsg(...)</code>.</p>
<p>To check if it is a clone event, refer to the <code>man 2 ptrace</code> manual for details on the option <code>PTRACE_O_TRACECLONE</code>, which explains how the status value is encoded in the case of a clone.</p>
<ol>
<li>Additionally, after setting the option <code>PTRACE_O_TRACECLONE</code>, the new thread will automatically be traced, so the new thread will also be paused. If you want the new thread to resume execution, you need to explicitly call <code>syscall.PtraceDetach</code> or execute <code>syscall.PtraceContinue</code> to allow the new thread to resume execution.</li>
</ol>
<h3 id="further-discussion">Further Discussion</h3>
<p>With the testing method introduced, we can prompt the user: do you want to track the current thread or the new thread? This is similar to the very useful feature in gdb for debugging multi-process and multi-threaded programs, such as <code>set follow-fork-mode</code>. We can choose between <code>parent</code>, <code>child</code>, or <code>ask</code>, and allow switching between these options during debugging. If we plan ahead whether to track the current thread or the child thread (or process) after a fork, this feature will be very useful.</p>
<p>Delve provides a different approach, allowing switching of the debugged thread through <code>threads</code>. In reality, Go does not expose thread-related APIs to developers, and most of the time, you should not need to explicitly track the execution of new threads after a clone. Therefore, it is rare to use it like gdb&apos;s <code>set follow-fork-mode</code> debugging mode. We are just extending the discussion here.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="15-set-regs.html" class="navigation navigation-prev " aria-label="Previous page: 6.15 Modifying Register Data">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="21-trace_old_threads.html" class="navigation navigation-next " aria-label="Next page: 6.21 Tracing Multi-threaded Programs 2">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"6.20 Tracing Multi-threaded Programs 1","level":"1.6.16","depth":2,"next":{"title":"6.21 Tracing Multi-threaded Programs 2","level":"1.6.17","depth":2,"path":"6-develop-inst-debugger/21-trace_old_threads.md","ref":"6-develop-inst-debugger/21-trace_old_threads.md","articles":[]},"previous":{"title":"6.15 Modifying Register Data","level":"1.6.15","depth":2,"path":"6-develop-inst-debugger/15-set-regs.md","ref":"6-develop-inst-debugger/15-set-regs.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["md-toc","github"],"pluginsConfig":{"github":{"url":"https://github.com/hitzhangjie/golang-debugger-book"},"intopic-toc":{"selector":".markdown-section h1, .markdown-section h2, .markdown-section h3, .markdown-section h4, .markdown-section h5, .markdown-section h6","visible":true,"label":{"en":"In This Article","zh":"æ¬æç®å½"}},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"md-toc":{"label":"In this article","selector":".markdown-section h2","visible":true},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"6-develop-inst-debugger/20-trace_new_threads.md","mtime":"2025-06-17T03:44:29.812Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2025-06-17T03:48:05.806Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-md-toc/anchor.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-md-toc/gumshoe.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-md-toc/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

